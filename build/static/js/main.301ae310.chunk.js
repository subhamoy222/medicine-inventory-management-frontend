(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},32:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(23),o=a.n(l),s=(a(32),a(6)),i=a(2),c=a(20);const m=Object(r.createContext)(),d=()=>Object(r.useContext)(m),u=e=>{let{children:t}=e;const[a,l]=Object(r.useState)(null);return Object(r.useEffect)(()=>{if(!a){const e=Object(c.a)(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL||"https://medicine-inventory-management-backend.onrender.com",{withCredentials:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,transports:["websocket","polling"]});e.on("connect",()=>{console.log("Socket connected");const t=JSON.parse(localStorage.getItem("user"));(null===t||void 0===t?void 0:t.email)&&e.emit("join",{email:t.email})}),e.on("disconnect",()=>{console.log("Socket disconnected")}),e.on("error",e=>{console.error("Socket error:",e)}),e.on("reconnect",t=>{console.log("Socket reconnected after",t,"attempts");const a=JSON.parse(localStorage.getItem("user"));(null===a||void 0===a?void 0:a.email)&&e.emit("join",{email:a.email})}),l(e)}return()=>{a&&(a.disconnect(),l(null))}},[]),n.a.createElement(m.Provider,{value:a},t)};var p=a(49);const g={INVENTORY_UPDATE:"inventory_update",PURCHASE_BILL_CREATED:"purchase_bill_created",SELL_BILL_CREATED:"sell_bill_created",RETURN_BILL_CREATED:"return_bill_created"};let x=null;const b=e=>{let{label:t,value:a,icon:r,color:l,onClick:o}=e;const s={teal:{bg:"bg-teal-100",text:"text-teal-600"},amber:{bg:"bg-amber-100",text:"text-amber-600"},rose:{bg:"bg-rose-100",text:"text-rose-600"}};return n.a.createElement("div",{onClick:o,className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer"},n.a.createElement("div",{className:"flex items-center space-x-3"},n.a.createElement("span",{className:`text-2xl ${s[l].bg} p-2 rounded-lg ${s[l].text}`},r),n.a.createElement("span",{className:"text-gray-700"},t)),n.a.createElement("span",{className:`text-xl font-bold ${s[l].text}`},a))},y=e=>{let{title:t,amount:a,icon:r,color:l}=e;const o={green:{bg:"bg-green-50",text:"text-green-600",hover:"hover:bg-green-100"},indigo:{bg:"bg-indigo-50",text:"text-indigo-600",hover:"hover:bg-indigo-100"},purple:{bg:"bg-purple-50",text:"text-purple-600",hover:"hover:bg-purple-100"}};return n.a.createElement("div",{className:`p-4 ${o[l].bg} rounded-xl ${o[l].hover} transition-colors`},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement("div",{className:"flex items-center space-x-3"},n.a.createElement("span",{className:`text-2xl ${o[l].text}`},r),n.a.createElement("span",{className:"text-gray-700"},t)),n.a.createElement("span",{className:`text-lg font-semibold ${o[l].text}`},a)))},h=e=>{let{label:t,icon:a,description:r,onClick:l,gradient:o}=e;return n.a.createElement("button",{onClick:l,className:`group relative flex flex-col items-center p-6 rounded-xl bg-gradient-to-br ${o} \n      hover:shadow-xl transition-all transform hover:scale-[1.02] min-h-[180px] justify-between\n      overflow-hidden`},n.a.createElement("div",{className:"absolute inset-0 bg-black/5 transition-all group-hover:bg-black/10"}),n.a.createElement("div",{className:"z-10 w-full"},n.a.createElement("div",{className:"flex items-center justify-between mb-4"},n.a.createElement("span",{className:"text-4xl text-white drop-shadow-md"},a),n.a.createElement("span",{className:"text-white/80 text-sm"},"View Report \u2192")),n.a.createElement("div",{className:"text-left"},n.a.createElement("h3",{className:"text-xl font-bold text-white mb-2"},t),n.a.createElement("p",{className:"text-sm text-white/90 leading-tight"},r))))};var f=function(){const e=Object(i.p)(),t=Object(i.n)(),a=d(),[l,o]=Object(r.useState)(0),[s,c]=Object(r.useState)(0),[m,u]=Object(r.useState)(0),[x,f]=Object(r.useState)([]),[E,N]=Object(r.useState)(""),[v,w]=Object(r.useState)({totalRevenue:0,averageOrderValue:0,topSellingMedicines:[],salesGrowth:0}),[S,k]=Object(r.useState)({dailySales:"\u20b90",monthlySales:"\u20b90",activeCustomers:0}),C=Object(r.useCallback)(e=>{const t=[],a=[],r=new Date;e.forEach(e=>{if(e.quantity<=10&&t.push({name:e.itemName,quantity:e.quantity}),e.expiryDate){const t=new Date(e.expiryDate),n=Math.ceil((t-r)/864e5);n>0&&n<=30&&a.push({name:e.itemName,expiryDate:e.expiryDate,daysRemaining:n})}}),c(t.length),u(a.length);const n=t.map(e=>({type:"warning",message:`Low stock: ${e.name} (${e.quantity} units remaining)`})),l=a.map(e=>({type:"warning",message:`Expiring soon: ${e.name} (${e.daysRemaining} days remaining)`}));f([...n,...l])},[]),D=Object(r.useCallback)(()=>{const e=localStorage.getItem("email");return N(e||"Guest"),e},[]),R=Object(r.useCallback)(async()=>{if(E)try{const t=(await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/inventory",{params:{email:E}})).data;o(t.length),C(t)}catch(e){console.error("Error fetching dashboard data:",e),o(0),c(0),u(0),f([{type:"warning",message:"Error loading inventory data"}])}},[E,C]),A=Object(r.useCallback)(async()=>{if(E)try{const t=localStorage.getItem("authToken");if(!t)throw new Error("Authentication required");const a=new Date,r=new Date(a.getFullYear(),a.getMonth(),1),n=new Date(a.getFullYear(),a.getMonth()+1,0),l=await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/bills/medicine-sales",{params:{email:E,startDate:r.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0],medicineName:""},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(l.data&&l.data.salesDetails){const e=l.data.salesDetails,t=e.reduce((e,t)=>e+(t.mrp*t.quantity-t.discount),0),a=[...new Set(e.map(e=>e.saleInvoiceNumber))],r=a.length>0?t/a.length:0,n=e.reduce((e,t)=>{const a=t.itemName;return e[a]||(e[a]=0),e[a]+=t.quantity,e},{}),o=Object.entries(n).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a}).slice(0,5).map(e=>{let[t,a]=e;return{name:t,quantity:a}});w({totalRevenue:t,averageOrderValue:r,topSellingMedicines:o,salesGrowth:0})}}catch(e){console.error("Error fetching analytics data:",e),w({totalRevenue:0,averageOrderValue:0,topSellingMedicines:[],salesGrowth:0})}},[E]);Object(r.useEffect)(()=>{const e=localStorage.getItem("authToken");e?p.a.defaults.headers.common.Authorization=`Bearer ${e}`:delete p.a.defaults.headers.common.Authorization},[]),Object(r.useEffect)(()=>{if(!a)return;const e=e=>{console.log("Real-time inventory update received:",e),e&&(o(e.count||0),e.data&&Array.isArray(e.data)&&C(e.data))},t=e=>{console.log("Real-time dashboard update received:",e),e&&k({dailySales:e.dailySales||"\u20b90",monthlySales:e.monthlySales||"\u20b90",activeCustomers:e.activeCustomers||0})};a.off(g.INVENTORY_UPDATE),a.off(g.DASHBOARD_UPDATE),a.on(g.INVENTORY_UPDATE,e),a.on(g.DASHBOARD_UPDATE,t);const r=D();return r&&a.emit("join",{email:r}),r&&(R(),A()),()=>{a.off(g.INVENTORY_UPDATE,e),a.off(g.DASHBOARD_UPDATE,t)}},[a,C,D,R,A]),Object(r.useEffect)(()=>{const e=()=>{"visible"===document.visibilityState&&D()&&(R(),A())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[D,R,A]),Object(r.useEffect)(()=>{D()&&(R(),A())},[t.pathname,D,R,A]);const I=()=>{e("/alerts")};return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 to-indigo-50 p-6 relative overflow-hidden"},n.a.createElement("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-teal-200 rounded-full opacity-20 mix-blend-multiply filter blur-xl animate-blob"}),n.a.createElement("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-indigo-200 rounded-full opacity-20 mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"}),n.a.createElement("div",{className:"relative z-10 max-w-7xl mx-auto"},n.a.createElement("div",{className:"flex items-center justify-between mb-8 p-4 bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm border border-white"},n.a.createElement("div",null,n.a.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"Welcome back, ",E||"Guest","!"),n.a.createElement("p",{className:"text-gray-600"},"Pharmacy Management Dashboard")),n.a.createElement("div",{className:"flex items-center space-x-4"},n.a.createElement("span",{onClick:I,className:"bg-teal-100 text-teal-800 px-3 py-1 rounded-full text-sm cursor-pointer hover:bg-teal-200 transition-colors"},x.length," Alerts"),n.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),localStorage.removeItem("authToken"),e("/login")},className:"flex items-center space-x-2 bg-red-500 text-white px-4 py-2 rounded-full shadow-sm hover:bg-red-600 transition-all"},n.a.createElement("span",null,"Logout"),n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))))),n.a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},n.a.createElement("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white"},n.a.createElement("div",{className:"flex items-center space-x-4 mb-6"},n.a.createElement("div",{className:"p-3 bg-teal-100 rounded-xl"},n.a.createElement("span",{className:"text-3xl text-teal-600"},"\ud83d\udc8a")),n.a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Inventory Health")),n.a.createElement("div",{className:"space-y-4"},n.a.createElement(b,{label:"Total Medicines",value:l,icon:"\ud83d\udce6",color:"teal",onClick:()=>e("/inventory")}),n.a.createElement(b,{label:"Low Stock",value:s,icon:"\u26a0\ufe0f",color:"amber",onClick:I}),n.a.createElement(b,{label:"Expiring Soon",value:m,icon:"\u231b",color:"rose",onClick:I}))),n.a.createElement("div",{className:"lg:col-span-2 bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white"},n.a.createElement("div",{className:"flex items-center space-x-4 mb-6"},n.a.createElement("div",{className:"p-3 bg-indigo-100 rounded-xl"},n.a.createElement("span",{className:"text-3xl text-indigo-600"},"\ud83d\udcc8")),n.a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Smart Bill Advisor")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.a.createElement("div",{className:"space-y-4"},n.a.createElement("h3",{className:"font-semibold text-gray-800 mb-4"},"Purchase Recommendations"),n.a.createElement("div",{className:"p-4 bg-white rounded-xl shadow-sm text-gray-500"},"Recommendations feature unavailable.")),n.a.createElement("div",{className:"space-y-4"},n.a.createElement("h3",{className:"font-semibold text-gray-800 mb-4"},"Recent Transactions"),n.a.createElement("div",{className:"grid grid-cols-1 gap-4"},n.a.createElement(y,{title:"Today's Sales",amount:S.dailySales,icon:"\ud83d\udcb0",color:"green"}),n.a.createElement(y,{title:"Monthly Revenue",amount:S.monthlySales,icon:"\ud83d\udcc6",color:"indigo"}),n.a.createElement(y,{title:"Active Customers",amount:"1,242",icon:"\ud83d\udc65",color:"purple"})))))),n.a.createElement("div",{className:"bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white mb-8"},n.a.createElement("div",{className:"flex items-center space-x-4 mb-6"},n.a.createElement("div",{className:"p-3 bg-purple-100 rounded-xl"},n.a.createElement("span",{className:"text-3xl text-purple-600"},"\ud83d\udcca")),n.a.createElement("h2",{className:"text-xl font-bold text-gray-900"},"Advanced Analytics")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},n.a.createElement(h,{label:"Sales Report",icon:"\ud83d\udcb0",description:"Daily/Weekly/Monthly sales trends",onClick:()=>e("/medicine-sales-summary"),gradient:"from-green-400 to-blue-400"}),n.a.createElement(h,{label:"Inventory Report",icon:"\ud83d\udce6",description:"Stock levels & valuation",onClick:()=>e("/view-inventory"),gradient:"from-teal-400 to-cyan-400"}),n.a.createElement(h,{label:"Purchase History",icon:"\ud83d\udd70\ufe0f",description:"Detailed purchase records",onClick:()=>e("/purchase-history"),gradient:"from-purple-500 to-pink-500"}),n.a.createElement(h,{label:"Generate Bill",icon:"\ud83e\uddfe",description:"Create new purchase/sell/return bills",onClick:()=>e("/generate-bill"),gradient:"from-blue-400 to-purple-400"})))))},E=a(41),N=a(42),v=a(43),w=a(44),S=a(45),k=a(46),C=a(47),D=a(48);var R=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)([]),[o,s]=Object(r.useState)(!0),[i,m]=Object(r.useState)(null),[d,u]=Object(r.useState)(""),[p,b]=Object(r.useState)(""),[y,h]=Object(r.useState)(!1),[f,R]=Object(r.useState)([]),[A,I]=Object(r.useState)([]),[j,P]=Object(r.useState)("all"),T=Object(r.useRef)({}),F=Object(r.useCallback)(e=>{const a=e.map(e=>{var t;return{...e,partyName:(null===(t=e.partyName)||void 0===t?void 0:t.trim())||"Unknown Supplier",expiryDate:e.expiryDate?new Date(e.expiryDate):null}});t(a),l(a);const r=new Date;r.setDate(r.getDate()+30);const n=a.filter(e=>e.expiryDate&&e.expiryDate<=r&&e.expiryDate>=new Date);R(n);const o=a.filter(e=>e.quantity<10&&e.quantity>0);I(o)},[]);Object(r.useEffect)(()=>{const e=localStorage.getItem("email");return e&&((e=>{if(!x)return(x=Object(c.b)(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL||"https://medicine-inventory-management-backend.onrender.com",{withCredentials:!0})).on("connect",()=>{console.log("Socket connected"),e&&e.email&&x.emit("join",e)}),x.on("disconnect",()=>{console.log("Socket disconnected")}),x.on("error",e=>{console.error("Socket error:",e)}),x;console.log("Socket already initialized")})({email:e}),T.current={handleInventoryUpdate:e=>{console.log("Real-time inventory update received:",e),e&&e.data&&Array.isArray(e.data)&&(h(!1),s(!1),F(e.data))}},((e,t)=>{x?x.on(e,t):console.warn("Socket not initialized")})(g.INVENTORY_UPDATE,T.current.handleInventoryUpdate)),()=>{T.current&&((e,t)=>{x?x.off(e,t):console.warn("Socket not initialized")})(g.INVENTORY_UPDATE,T.current.handleInventoryUpdate),x&&(x.disconnect(),x=null)}},[F]);const O=async()=>{try{h(!0);const e=localStorage.getItem("email"),a=localStorage.getItem("token");if(!e||!a)throw new Error("Authentication required");const r=await fetch(`https://medicine-inventory-management-backend.onrender.com/api/inventory?email=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to fetch inventory")}const n=await r.json();F(n),m(null)}catch(i){console.error("Fetch error:",i),m(i.message||"An unexpected error occurred"),t([]),l([])}finally{s(!1),h(!1)}};Object(r.useEffect)(()=>{O()},[]),Object(r.useEffect)(()=>{if(e.length){let t=e;p&&(t=t.filter(e=>e.partyName.toLowerCase().includes(p.toLowerCase()))),d&&(t=t.filter(e=>e.itemName.toLowerCase().includes(d.toLowerCase())||e.batch.toLowerCase().includes(d.toLowerCase())||e.description&&e.description.toLowerCase().includes(d.toLowerCase()))),"expiring"===j?t=t.filter(e=>f.some(t=>t._id===e._id)):"lowstock"===j&&(t=t.filter(e=>e.quantity<10&&e.quantity>0)),l(t)}},[d,p,e,j,f]);const L=[...new Set(e.map(e=>e.partyName))].sort(),$=e=>{if(!e)return!1;const t=new Date;return t.setDate(t.getDate()+30),e<=t&&e>=new Date},Q=e.reduce((e,t)=>e+(t.purchaseRate||0)*(t.quantity||0),0);return n.a.createElement("div",{className:"bg-slate-50 min-h-screen pb-8"},n.a.createElement("div",{className:"bg-gradient-to-r from-blue-600 via-purple-500 to-indigo-700 py-8 px-6 shadow-lg"},n.a.createElement("div",{className:"container mx-auto"},n.a.createElement("h1",{className:"text-3xl font-bold text-white"},"Medicine Inventory"),n.a.createElement("p",{className:"text-blue-100 mt-2 text-lg"},"Manage your pharmaceutical stock efficiently"))),n.a.createElement("div",{className:"container mx-auto px-4 -mt-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-indigo-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Total Medicines"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},e.length),n.a.createElement("p",{className:"text-indigo-500 text-sm mt-1"},"Unique products")),n.a.createElement("div",{className:"bg-indigo-100 p-4 rounded-full"},n.a.createElement(E.a,{className:"h-8 w-8 text-indigo-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-purple-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Unique Suppliers"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},L.length),n.a.createElement("p",{className:"text-purple-500 text-sm mt-1"},"Registered partners")),n.a.createElement("div",{className:"bg-purple-100 p-4 rounded-full"},n.a.createElement(N.a,{className:"h-8 w-8 text-purple-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-rose-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Expiring Soon"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},f.length),n.a.createElement("p",{className:"text-rose-500 text-sm mt-1"},"Within 30 days")),n.a.createElement("div",{className:"bg-rose-100 p-4 rounded-full"},n.a.createElement(v.a,{className:"h-8 w-8 text-rose-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-emerald-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Inventory Value"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},"\u20b9",Q.toLocaleString("en-IN")),n.a.createElement("p",{className:"text-emerald-500 text-sm mt-1"},"Total investment")),n.a.createElement("div",{className:"bg-emerald-100 p-4 rounded-full"},n.a.createElement(w.a,{className:"h-8 w-8 text-emerald-600"}))))),(A.length>0||f.length>0)&&n.a.createElement("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},A.length>0&&n.a.createElement("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-md shadow"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement(S.a,{className:"h-5 w-5 text-amber-600"})),n.a.createElement("div",{className:"ml-3"},n.a.createElement("h3",{className:"text-sm font-medium text-amber-800"},"Low Stock Alert"),n.a.createElement("div",{className:"mt-2 text-sm text-amber-700"},n.a.createElement("p",null,"You have ",A.length," items with low inventory levels.")),n.a.createElement("div",{className:"mt-4"},n.a.createElement("div",{className:"-mx-2 -my-1.5 flex"},n.a.createElement("button",{onClick:()=>P("lowstock"),className:"bg-amber-100 px-3 py-1.5 rounded-md text-sm font-medium text-amber-800 hover:bg-amber-200 focus:outline-none"},"View Items")))))),f.length>0&&n.a.createElement("div",{className:"bg-rose-50 border-l-4 border-rose-500 p-4 rounded-md shadow"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement(v.a,{className:"h-5 w-5 text-rose-600"})),n.a.createElement("div",{className:"ml-3"},n.a.createElement("h3",{className:"text-sm font-medium text-rose-800"},"Expiry Alert"),n.a.createElement("div",{className:"mt-2 text-sm text-rose-700"},n.a.createElement("p",null,"You have ",f.length," medicines expiring within 30 days.")),n.a.createElement("div",{className:"mt-4"},n.a.createElement("div",{className:"-mx-2 -my-1.5 flex"},n.a.createElement("button",{onClick:()=>P("expiring"),className:"bg-rose-100 px-3 py-1.5 rounded-md text-sm font-medium text-rose-800 hover:bg-rose-200 focus:outline-none"},"View Items"))))))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6"},n.a.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.a.createElement("span",{className:"text-gray-700 font-medium"},"Quick Filters:"),n.a.createElement("button",{onClick:()=>P("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"all"===j?"bg-indigo-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`},"All Items"),n.a.createElement("button",{onClick:()=>P("lowstock"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"lowstock"===j?"bg-amber-500 text-white":"bg-amber-50 text-amber-800 hover:bg-amber-100"}`},"Low Stock (",A.length,")"),n.a.createElement("button",{onClick:()=>P("expiring"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"expiring"===j?"bg-rose-500 text-white":"bg-rose-50 text-rose-800 hover:bg-rose-100"}`},"Expiring Soon (",f.length,")"))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.a.createElement("div",{className:"relative"},n.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},n.a.createElement(k.a,{className:"h-5 w-5 text-gray-400"})),n.a.createElement("input",{type:"text",placeholder:"Search medicines, batch...",className:"pl-10 pr-4 py-3 block w-full border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors",value:d,onChange:e=>u(e.target.value)})),n.a.createElement("div",null,n.a.createElement("select",{className:"block w-full border border-gray-300 rounded-lg py-3 px-4 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",value:p,onChange:e=>b(e.target.value)},n.a.createElement("option",{value:""},"All Suppliers"),L.map(e=>n.a.createElement("option",{key:e,value:e},e)))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{onClick:O,disabled:y,className:"flex items-center justify-center px-5 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-md"},n.a.createElement(C.a,{className:`h-5 w-5 mr-2 ${y?"animate-spin":""}`}),"Refresh Data")))),o?n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center"},n.a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto"}),n.a.createElement("p",{className:"text-gray-600 mt-6 text-lg"},"Loading inventory data...")):i?n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement(S.a,{className:"h-6 w-6 text-red-500 mr-3"}),n.a.createElement("p",{className:"text-red-500 font-medium text-lg"},"Error: ",i)),n.a.createElement("p",{className:"mt-2 text-gray-600"},"Please try refreshing or check your connection."),n.a.createElement("button",{onClick:O,className:"mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},"Try Again")):n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden"},0===a.length?n.a.createElement("div",{className:"p-12 text-center"},n.a.createElement(E.a,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),n.a.createElement("h3",{className:"text-xl font-medium text-gray-900"},"No inventory items found"),n.a.createElement("p",{className:"mt-2 text-gray-500 text-lg"},d||p||"all"!==j?"Try adjusting your search filters":"Add items to your inventory to get started"),(d||p||"all"!==j)&&n.a.createElement("button",{onClick:()=>{u(""),b(""),P("all")},className:"mt-6 px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors"},"Clear Filters")):n.a.createElement("div",{className:"overflow-x-auto"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,["Item Name","Batch","Supplier","Expiry Date","Pack","Quantity","Purchase Rate","MRP","GST (%)","Description"].map(e=>n.a.createElement("th",{key:e,className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gradient-to-r from-gray-50 to-gray-100"},e)))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},a.map(e=>{var t,a;return n.a.createElement("tr",{key:e._id,className:`hover:bg-blue-50 transition-colors ${e.quantity<10&&e.quantity>0?"bg-amber-50":""} ${$(e.expiryDate)?"bg-rose-50":""}`},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("div",{className:"font-medium text-gray-900"},e.itemName)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:"text-gray-600 text-sm"},e.batch)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},e.partyName||"Unknown Supplier")),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:`text-sm ${$(e.expiryDate)?"text-rose-600 font-medium":"text-gray-600"}`},(e=>e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not specified")(e.expiryDate))),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.pack||"N/A"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-sm font-medium ${e.quantity<10&&e.quantity>0?"bg-amber-100 text-amber-800":e.quantity>100?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`},e.quantity)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},"\u20b9",(null===(t=e.purchaseRate)||void 0===t?void 0:t.toFixed(2))||"0.00"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},"\u20b9",(null===(a=e.mrp)||void 0===a?void 0:a.toFixed(2))||"0.00"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.gstPercentage||0,"%"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.description||"-"))})))),n.a.createElement("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200"},n.a.createElement("div",{className:"flex items-center text-gray-600 text-sm"},n.a.createElement(D.a,{className:"h-4 w-4 mr-2 text-indigo-500"}),"Showing ",n.a.createElement("span",{className:"font-medium mx-1"},a.length)," of"," ",n.a.createElement("span",{className:"font-medium mx-1"},e.length)," items","all"!==j&&n.a.createElement("span",{className:"ml-2"},"(","lowstock"===j?"Low Stock":"Expiring Soon"," filter active)")),"all"!==j&&n.a.createElement("button",{onClick:()=>P("all"),className:"text-sm text-indigo-600 hover:text-indigo-900"},"Show All Items")))))};const A=()=>n.a.createElement("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/90 to-purple-600/90 backdrop-blur-sm z-50 flex items-center justify-center"},n.a.createElement("div",{className:"text-center"},n.a.createElement("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white mb-4"}),n.a.createElement("h2",{className:"text-white text-xl font-semibold"},"Loading Alerts..."))),I=e=>{let{alert:t,onClick:a}=e;return n.a.createElement("div",{onClick:a,className:`${(e=>{switch(e){case"danger":return"bg-red-100 border-red-500 text-red-700";case"warning":return"bg-yellow-100 border-yellow-500 text-yellow-700";case"success":return"bg-green-100 border-green-500 text-green-700";default:return"bg-blue-100 border-blue-500 text-blue-700"}})(t.type)} cursor-pointer transform transition-all duration-300 hover:scale-[1.02] \n        border-l-4 p-4 mb-4 rounded-lg shadow-md hover:shadow-lg flex items-center justify-between`},n.a.createElement("div",{className:"flex items-center space-x-3"},n.a.createElement("span",{className:"text-2xl"},(e=>{switch(e){case"danger":return"\u26a0\ufe0f";case"warning":return"\u26a1";case"success":return"\u2705";default:return"\u2139\ufe0f"}})(t.type)),n.a.createElement("div",null,n.a.createElement("h3",{className:"font-semibold"},t.title),n.a.createElement("p",{className:"text-sm opacity-90"},t.message))),n.a.createElement("div",{className:"text-sm opacity-75"},t.time&&new Date(t.time).toLocaleString()))};var j=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)(!0),[o,s]=Object(r.useState)("all"),c=Object(i.p)();Object(r.useEffect)(()=>{(async()=>{try{const a=localStorage.getItem("email");if(!a)return void c("/login");await new Promise(e=>setTimeout(e,1500));const r=(await p.a.get(`https://medicine-inventory-management-backend.onrender.com/api/inventory/${a}`)).data,n=new Date,o=10,s=30,i=[];r.forEach(e=>{e.quantity<=o&&i.push({type:"danger",title:"Low Stock Alert",message:`${e.itemName} is running low (${e.quantity} units remaining)`,category:"inventory",time:(new Date).toISOString()})}),r.forEach(e=>{if(e.expiryDate){const t=new Date(e.expiryDate),a=Math.ceil((t-n)/864e5);a>0&&a<=s&&i.push({type:"warning",title:"Expiring Soon",message:`${e.itemName} will expire in ${a} days`,category:"expiry",time:(new Date).toISOString()})}}),t(i),l(!1)}catch(e){console.error("Error fetching alerts:",e),l(!1)}})()},[c]);const m="all"===o?e:e.filter(e=>e.category===o);return a?n.a.createElement(A,null):n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6"},n.a.createElement("div",{className:"max-w-4xl mx-auto"},n.a.createElement("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6"},n.a.createElement("div",{className:"flex items-center justify-between mb-4"},n.a.createElement("h1",{className:"text-2xl font-bold text-gray-800"},"Alert Center"),n.a.createElement("div",{className:"flex space-x-2"},n.a.createElement("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg transition-all ${"all"===o?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},"All"),n.a.createElement("button",{onClick:()=>s("inventory"),className:`px-4 py-2 rounded-lg transition-all ${"inventory"===o?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},"Inventory"),n.a.createElement("button",{onClick:()=>s("expiry"),className:`px-4 py-2 rounded-lg transition-all ${"expiry"===o?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`},"Expiry"))),n.a.createElement("p",{className:"text-gray-600"},"You have ",m.length," active ","all"===o?"":o," alerts")),n.a.createElement("div",{className:"space-y-4"},m.length>0?m.map((e,t)=>n.a.createElement(I,{key:t,alert:e,onClick:()=>(e=>{l(!0),setTimeout(()=>{"inventory"===e.category?c("/inventory"):"expiry"===e.category&&c("/inventory?filter=expiring")},800)})(e)})):n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-8 text-center"},n.a.createElement("span",{className:"text-4xl mb-4 block"},"\ud83c\udf89"),n.a.createElement("h3",{className:"text-xl font-semibold text-gray-800 mb-2"},"No Active Alerts"),n.a.createElement("p",{className:"text-gray-600"},"Everything is running smoothly! We'll notify you when something needs attention.")))))};var P=()=>{const[e,t]=Object(r.useState)({email:"",password:""}),[a,l]=Object(r.useState)(""),[o,s]=Object(r.useState)(!1),c=Object(i.p)(),m=a=>{t({...e,[a.target.name]:a.target.value})};return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 flex items-center justify-center p-4"},n.a.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md"},n.a.createElement("h2",{className:"text-3xl font-bold text-indigo-600 mb-6 text-center"},"Login"),a&&n.a.createElement("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg"},a),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),s(!0),l("");try{const t=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/users/login",e);200===t.status?(localStorage.setItem("token",t.data.token),localStorage.setItem("email",e.email.toLowerCase()),c("/dashboard")):l("Login failed. Please check your credentials.")}catch(a){a.response&&a.response.data&&a.response.data.message?l(a.response.data.message):l("Login failed. Please check your credentials."),console.error("Login error:",a)}finally{s(!1)}},className:"space-y-4"},n.a.createElement("div",null,n.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:m,required:!0,className:"w-full rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors"})),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:m,required:!0,className:"w-full rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors"})),n.a.createElement("button",{type:"submit",disabled:o,className:"w-full px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition-colors disabled:bg-gray-400"},o?"Logging in...":"Login"))))};var T=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)({name:"",email:"",password:"",confirmPassword:"",gstNo:""}),[l,o]=Object(r.useState)(""),[s,c]=Object(r.useState)(""),[m,d]=Object(r.useState)(!1),[u,g]=Object(r.useState)(!1),x=e=>{const{name:r,value:n}=e.target;a({...t,[r]:n})};return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8"},m&&n.a.createElement(()=>n.a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.a.createElement("div",{className:"bg-white p-8 rounded-lg shadow-xl text-center"},n.a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),n.a.createElement("p",{className:"text-gray-700 text-lg"},"Processing your registration..."))),null),u&&n.a.createElement(()=>n.a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.a.createElement("div",{className:"bg-white p-8 rounded-lg shadow-xl text-center max-w-md"},n.a.createElement("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},n.a.createElement("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"}))),n.a.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},"Registration Successful!"),n.a.createElement("p",{className:"text-gray-600 mb-4"},"Your account has been created successfully."),n.a.createElement("p",{className:"text-gray-500 text-sm"},"Redirecting to login page..."))),null),n.a.createElement("div",{className:"max-w-md mx-auto"},n.a.createElement("div",{className:"text-center mb-8"},n.a.createElement("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600"},"Create Your Account"),n.a.createElement("p",{className:"mt-2 text-gray-600"},"Join our pharmacy management system")),n.a.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},l&&n.a.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-red-700"},l)))),n.a.createElement("form",{onSubmit:async r=>{if(r.preventDefault(),o(""),c(""),d(!0),t.password!==t.confirmPassword)return o("Passwords don't match"),void d(!1);try{const r=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/users/register",t);c(r.data.message),a({name:"",email:"",password:"",confirmPassword:"",gstNo:""}),g(!0),setTimeout(()=>{e("/login")},3e3)}catch(s){var n,l;o((null===(n=s.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Registration failed")}finally{d(!1)}},className:"space-y-6"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Full Name"),n.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},n.a.createElement("input",{type:"text",name:"name",value:t.name,onChange:x,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name",required:!0}))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Email Address"),n.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},n.a.createElement("input",{type:"email",name:"email",value:t.email,onChange:x,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0}))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Password"),n.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},n.a.createElement("input",{type:"password",name:"password",value:t.password,onChange:x,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password",required:!0}))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Confirm Password"),n.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},n.a.createElement("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:x,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password",required:!0}))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"GST Number"),n.a.createElement("div",{className:"mt-1 relative rounded-md shadow-sm"},n.a.createElement("input",{type:"text",name:"gstNo",value:t.gstNo,onChange:x,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your GST number",required:!0}))),n.a.createElement("div",null,n.a.createElement("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},m?n.a.createElement("div",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Creating Account..."):"Create Account"))),n.a.createElement("div",{className:"mt-6 text-center"},n.a.createElement("p",{className:"text-sm text-gray-600"},"Already have an account?"," ",n.a.createElement("button",{onClick:()=>e("/login"),className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200"},"Sign in"))))))},F=a(11);var O=()=>n.a.createElement("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-blue-50 to-purple-50"},n.a.createElement("nav",{className:"bg-gradient-to-r from-purple-600 to-blue-600 shadow-lg"},n.a.createElement("div",{className:"container mx-auto px-4 py-4"},n.a.createElement("div",{className:"flex flex-wrap justify-between items-center"},n.a.createElement(s.b,{to:"/",className:"flex items-center space-x-2"},n.a.createElement(F.e,{className:"text-white text-3xl animate-pulse"}),n.a.createElement("h1",{className:"text-white text-2xl font-bold font-mono hover:text-purple-200 transition-colors"},"MedInventory Pro")),n.a.createElement("div",{className:"flex space-x-4 mt-2 sm:mt-0"},n.a.createElement(s.b,{to:"/login"},n.a.createElement("button",{className:"bg-white/10 backdrop-blur-sm text-white px-6 py-2 rounded-full \r hover:bg-white/20 hover:scale-105 transition-all shadow-md hover:shadow-lg\r font-semibold flex items-center space-x-2"},n.a.createElement("span",null,"Login"))),n.a.createElement(s.b,{to:"/register"},n.a.createElement("button",{className:"bg-pink-500 text-white px-6 py-2 rounded-full \r hover:bg-pink-600 hover:scale-105 transition-all shadow-md hover:shadow-lg\r font-semibold flex items-center space-x-2"},n.a.createElement("span",null,"Get Started"),n.a.createElement("span",{className:"text-lg"},"\ud83d\ude80"))))))),n.a.createElement("main",{className:"flex-grow container mx-auto text-center py-16 px-4"},n.a.createElement("div",{className:"max-w-4xl mx-auto mb-16"},n.a.createElement("h2",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent"},"Revolutionizing Pharmacy Management"),n.a.createElement("p",{className:"text-xl text-gray-700 mb-8 leading-relaxed"},"Transform your pharmacy operations with our AI-powered inventory solution.",n.a.createElement("span",{className:"block mt-2 text-purple-600 font-semibold"},"Real-time tracking \u2022 Automated alerts \u2022 Smart analytics"))),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4"},[{icon:F.b,title:"Smart Inventory",description:"AI-powered stock predictions and expiration tracking",color:"from-purple-500 to-blue-500"},{icon:F.e,title:"Medicine Tracking",description:"Batch-level tracking with real-time updates",color:"from-pink-500 to-orange-500"},{icon:F.a,title:"Advanced Analytics",description:"Interactive dashboards & sales insights",color:"from-teal-400 to-blue-400"}].map((e,t)=>n.a.createElement("div",{key:t,className:"group bg-white rounded-xl shadow-xl p-6 hover:shadow-2xl transition-all \r duration-300 hover:-translate-y-2 border-2 border-transparent hover:border-purple-200"},n.a.createElement("div",{className:`bg-gradient-to-br ${e.color} w-16 h-16 rounded-xl mb-4 \n                             mx-auto flex items-center justify-center text-white text-3xl \n                             group-hover:rotate-12 transition-transform`},n.a.createElement(e.icon,null)),n.a.createElement("h3",{className:"text-2xl font-bold mb-2 text-gray-800"},e.title),n.a.createElement("p",{className:"text-gray-600"},e.description)))),n.a.createElement("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto"},[{number:"500+",label:"Pharmacies Trust Us"},{number:"1M+",label:"Medicines Tracked"},{number:"24/7",label:"Support"},{number:"99.9%",label:"Accuracy"}].map((e,t)=>n.a.createElement("div",{key:t,className:"bg-white/50 backdrop-blur-sm p-4 rounded-xl border border-purple-100 \r hover:bg-white hover:shadow-lg transition-all"},n.a.createElement("div",{className:"text-3xl font-bold text-purple-600 mb-1"},e.number),n.a.createElement("div",{className:"text-sm text-gray-600 font-medium"},e.label))))),n.a.createElement("footer",{className:"bg-gradient-to-r from-purple-900 to-blue-900 text-white py-8"},n.a.createElement("div",{className:"container mx-auto px-4"},n.a.createElement("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-6 md:space-y-0"},n.a.createElement("div",{className:"text-center md:text-left"},n.a.createElement("h3",{className:"text-2xl font-bold mb-2"},"MedInventory Pro"),n.a.createElement("p",{className:"text-gray-300"},"\xa9 2023 All rights reserved")),n.a.createElement("div",{className:"flex space-x-6"},[{href:"#",icon:F.c,color:"hover:text-blue-400"},{href:"#",icon:F.f,color:"hover:text-cyan-400"},{href:"#",icon:F.d,color:"hover:text-pink-400"}].map((e,t)=>n.a.createElement("a",{key:t,href:e.href,className:`text-2xl transition-transform hover:scale-125 ${e.color}`,target:"_blank",rel:"noreferrer"},n.a.createElement(e.icon,null))))),n.a.createElement("div",{className:"mt-8 text-center text-gray-300 text-sm"},n.a.createElement("p",null,"Healthcare powered by technology \ud83d\udc8a"),n.a.createElement("p",{className:"mt-2"},"Need help? ",n.a.createElement("a",{href:"mailto:support@medinventory.com",className:"underline hover:text-white"},"Contact us"))))));var L=()=>{const[e,t]=Object(r.useState)([]),[a,l]=Object(r.useState)([]),[o,s]=Object(r.useState)(!0),[i,c]=Object(r.useState)(null),[m,d]=Object(r.useState)(""),[u,p]=Object(r.useState)(""),[g,x]=Object(r.useState)(!1),[b,y]=Object(r.useState)([]),[h,f]=Object(r.useState)([]),[R,A]=Object(r.useState)("all"),I=async()=>{try{x(!0);const e=localStorage.getItem("email"),a=localStorage.getItem("token");if(!e||!a)throw new Error("Authentication required");const r=await fetch(`https://medicine-inventory-management-backend.onrender.com/api/inventory?email=${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to fetch inventory")}const n=(await r.json()).map(e=>{var t;return{...e,partyName:(null===(t=e.partyName)||void 0===t?void 0:t.trim())||"Unknown Supplier",expiryDate:e.expiryDate?new Date(e.expiryDate):null}});t(n),l(n);const o=new Date;o.setDate(o.getDate()+30);const m=n.filter(e=>e.expiryDate&&e.expiryDate<=o&&e.expiryDate>=new Date);y(m);const d=n.filter(e=>e.quantity<10&&e.quantity>0);f(d),c(null)}catch(i){console.error("Fetch error:",i),c(i.message||"An unexpected error occurred"),t([]),l([])}finally{s(!1),x(!1)}};Object(r.useEffect)(()=>{I()},[]),Object(r.useEffect)(()=>{if(e.length){let t=e;u&&(t=t.filter(e=>e.partyName.toLowerCase().includes(u.toLowerCase()))),m&&(t=t.filter(e=>e.itemName.toLowerCase().includes(m.toLowerCase())||e.batch.toLowerCase().includes(m.toLowerCase())||e.description&&e.description.toLowerCase().includes(m.toLowerCase()))),"expiring"===R?t=t.filter(e=>b.some(t=>t._id===e._id)):"lowstock"===R&&(t=t.filter(e=>e.quantity<10&&e.quantity>0)),l(t)}},[m,u,e,R,b]);const j=[...new Set(e.map(e=>e.partyName))].sort(),P=e=>{if(!e)return!1;const t=new Date;return t.setDate(t.getDate()+30),e<=t&&e>=new Date},T=e.reduce((e,t)=>e+(t.purchaseRate||0)*(t.quantity||0),0);return n.a.createElement("div",{className:"bg-slate-50 min-h-screen pb-8"},n.a.createElement("div",{className:"bg-gradient-to-r from-blue-600 via-purple-500 to-indigo-700 py-8 px-6 shadow-lg"},n.a.createElement("div",{className:"container mx-auto"},n.a.createElement("h1",{className:"text-3xl font-bold text-white"},"Medicine Inventory"),n.a.createElement("p",{className:"text-blue-100 mt-2 text-lg"},"Manage your pharmaceutical stock efficiently"))),n.a.createElement("div",{className:"container mx-auto px-4 -mt-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-indigo-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Total Medicines"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},e.length),n.a.createElement("p",{className:"text-indigo-500 text-sm mt-1"},"Unique products")),n.a.createElement("div",{className:"bg-indigo-100 p-4 rounded-full"},n.a.createElement(E.a,{className:"h-8 w-8 text-indigo-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-purple-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Unique Suppliers"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},j.length),n.a.createElement("p",{className:"text-purple-500 text-sm mt-1"},"Registered partners")),n.a.createElement("div",{className:"bg-purple-100 p-4 rounded-full"},n.a.createElement(N.a,{className:"h-8 w-8 text-purple-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-rose-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Expiring Soon"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},b.length),n.a.createElement("p",{className:"text-rose-500 text-sm mt-1"},"Within 30 days")),n.a.createElement("div",{className:"bg-rose-100 p-4 rounded-full"},n.a.createElement(v.a,{className:"h-8 w-8 text-rose-600"})))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-5 border-b-4 border-emerald-500 transition-all hover:shadow-xl"},n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-gray-500 text-sm font-medium"},"Inventory Value"),n.a.createElement("p",{className:"text-3xl font-bold text-gray-800"},"\u20b9",T.toLocaleString("en-IN")),n.a.createElement("p",{className:"text-emerald-500 text-sm mt-1"},"Total investment")),n.a.createElement("div",{className:"bg-emerald-100 p-4 rounded-full"},n.a.createElement(w.a,{className:"h-8 w-8 text-emerald-600"}))))),(h.length>0||b.length>0)&&n.a.createElement("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4"},h.length>0&&n.a.createElement("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-md shadow"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement(S.a,{className:"h-5 w-5 text-amber-600"})),n.a.createElement("div",{className:"ml-3"},n.a.createElement("h3",{className:"text-sm font-medium text-amber-800"},"Low Stock Alert"),n.a.createElement("div",{className:"mt-2 text-sm text-amber-700"},n.a.createElement("p",null,"You have ",h.length," items with low inventory levels.")),n.a.createElement("div",{className:"mt-4"},n.a.createElement("div",{className:"-mx-2 -my-1.5 flex"},n.a.createElement("button",{onClick:()=>A("lowstock"),className:"bg-amber-100 px-3 py-1.5 rounded-md text-sm font-medium text-amber-800 hover:bg-amber-200 focus:outline-none"},"View Items")))))),b.length>0&&n.a.createElement("div",{className:"bg-rose-50 border-l-4 border-rose-500 p-4 rounded-md shadow"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement(v.a,{className:"h-5 w-5 text-rose-600"})),n.a.createElement("div",{className:"ml-3"},n.a.createElement("h3",{className:"text-sm font-medium text-rose-800"},"Expiry Alert"),n.a.createElement("div",{className:"mt-2 text-sm text-rose-700"},n.a.createElement("p",null,"You have ",b.length," medicines expiring within 30 days.")),n.a.createElement("div",{className:"mt-4"},n.a.createElement("div",{className:"-mx-2 -my-1.5 flex"},n.a.createElement("button",{onClick:()=>A("expiring"),className:"bg-rose-100 px-3 py-1.5 rounded-md text-sm font-medium text-rose-800 hover:bg-rose-200 focus:outline-none"},"View Items"))))))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6"},n.a.createElement("div",{className:"flex flex-wrap items-center gap-2"},n.a.createElement("span",{className:"text-gray-700 font-medium"},"Quick Filters:"),n.a.createElement("button",{onClick:()=>A("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"all"===R?"bg-indigo-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`},"All Items"),n.a.createElement("button",{onClick:()=>A("lowstock"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"lowstock"===R?"bg-amber-500 text-white":"bg-amber-50 text-amber-800 hover:bg-amber-100"}`},"Low Stock (",h.length,")"),n.a.createElement("button",{onClick:()=>A("expiring"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${"expiring"===R?"bg-rose-500 text-white":"bg-rose-50 text-rose-800 hover:bg-rose-100"}`},"Expiring Soon (",b.length,")"))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.a.createElement("div",{className:"relative"},n.a.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},n.a.createElement(k.a,{className:"h-5 w-5 text-gray-400"})),n.a.createElement("input",{type:"text",placeholder:"Search medicines, batch...",className:"pl-10 pr-4 py-3 block w-full border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors",value:m,onChange:e=>d(e.target.value)})),n.a.createElement("div",null,n.a.createElement("select",{className:"block w-full border border-gray-300 rounded-lg py-3 px-4 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",value:u,onChange:e=>p(e.target.value)},n.a.createElement("option",{value:""},"All Suppliers"),j.map(e=>n.a.createElement("option",{key:e,value:e},e)))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{onClick:I,disabled:g,className:"flex items-center justify-center px-5 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-md"},n.a.createElement(C.a,{className:`h-5 w-5 mr-2 ${g?"animate-spin":""}`}),"Refresh Data")))),o?n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center"},n.a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto"}),n.a.createElement("p",{className:"text-gray-600 mt-6 text-lg"},"Loading inventory data...")):i?n.a.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement(S.a,{className:"h-6 w-6 text-red-500 mr-3"}),n.a.createElement("p",{className:"text-red-500 font-medium text-lg"},"Error: ",i)),n.a.createElement("p",{className:"mt-2 text-gray-600"},"Please try refreshing or check your connection."),n.a.createElement("button",{onClick:I,className:"mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},"Try Again")):n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden"},0===a.length?n.a.createElement("div",{className:"p-12 text-center"},n.a.createElement(E.a,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),n.a.createElement("h3",{className:"text-xl font-medium text-gray-900"},"No inventory items found"),n.a.createElement("p",{className:"mt-2 text-gray-500 text-lg"},m||u||"all"!==R?"Try adjusting your search filters":"Add items to your inventory to get started"),(m||u||"all"!==R)&&n.a.createElement("button",{onClick:()=>{d(""),p(""),A("all")},className:"mt-6 px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition-colors"},"Clear Filters")):n.a.createElement("div",{className:"overflow-x-auto"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,["Item Name","Batch","Supplier","Expiry Date","Pack","Quantity","Purchase Rate","MRP","GST (%)","Description"].map(e=>n.a.createElement("th",{key:e,className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-gradient-to-r from-gray-50 to-gray-100"},e)))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},a.map(e=>{var t,a;return n.a.createElement("tr",{key:e._id,className:`hover:bg-blue-50 transition-colors ${e.quantity<10&&e.quantity>0?"bg-amber-50":""} ${P(e.expiryDate)?"bg-rose-50":""}`},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("div",{className:"font-medium text-gray-900"},e.itemName)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:"text-gray-600 text-sm"},e.batch)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},e.partyName||"Unknown Supplier")),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:`text-sm ${P(e.expiryDate)?"text-rose-600 font-medium":"text-gray-600"}`},(e=>e?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not specified")(e.expiryDate))),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.pack||"N/A"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("span",{className:`inline-flex items-center px-2.5 py-1 rounded-md text-sm font-medium ${e.quantity<10&&e.quantity>0?"bg-amber-100 text-amber-800":e.quantity>100?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`},e.quantity)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},"\u20b9",(null===(t=e.purchaseRate)||void 0===t?void 0:t.toFixed(2))||"0.00"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium"},"\u20b9",(null===(a=e.mrp)||void 0===a?void 0:a.toFixed(2))||"0.00"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.gstPercentage||0,"%"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.description||"-"))})))),n.a.createElement("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200"},n.a.createElement("div",{className:"flex items-center text-gray-600 text-sm"},n.a.createElement(D.a,{className:"h-4 w-4 mr-2 text-indigo-500"}),"Showing ",n.a.createElement("span",{className:"font-medium mx-1"},a.length)," of"," ",n.a.createElement("span",{className:"font-medium mx-1"},e.length)," items","all"!==R&&n.a.createElement("span",{className:"ml-2"},"(","lowstock"===R?"Low Stock":"Expiring Soon"," filter active)")),"all"!==R&&n.a.createElement("button",{onClick:()=>A("all"),className:"text-sm text-indigo-600 hover:text-indigo-900"},"Show All Items")))))};const $=e=>{let{title:t,subtitle:a,gradient:r,icon:l,onClick:o}=e;return n.a.createElement("button",{onClick:o,className:`group bg-gradient-to-br ${r} text-white p-6 rounded-xl shadow-xl transform transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl active:scale-95`},n.a.createElement("div",{className:"flex items-start space-x-4"},n.a.createElement("span",{className:"text-4xl bg-white/20 p-4 rounded-lg"},l),n.a.createElement("div",{className:"text-left"},n.a.createElement("h3",{className:"text-2xl font-bold mb-2"},t),n.a.createElement("p",{className:"text-white/90"},a))))};var Q=function(){const e=Object(i.p)();return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex flex-col items-center justify-center p-8 relative overflow-hidden"},n.a.createElement("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-purple-200 rounded-full opacity-20 mix-blend-multiply filter blur-xl animate-blob"}),n.a.createElement("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-blue-200 rounded-full opacity-20 mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"}),n.a.createElement("div",{className:"relative z-10 max-w-4xl w-full"},n.a.createElement("div",{className:"text-center mb-12 space-y-6"},n.a.createElement("h2",{className:"text-5xl font-bold text-gray-900 mb-4 bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600"},"Smart Bill Generation"),n.a.createElement("p",{className:"text-xl text-gray-700 leading-relaxed"},"Streamline your pharmacy's financial operations with our intuitive bill management system. Select a bill type below to maintain perfect records and optimize your inventory flow.")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-16"},n.a.createElement($,{title:"Purchase Bill",subtitle:"Record incoming stock",gradient:"from-teal-500 to-cyan-600",icon:"\ud83d\udce5",onClick:()=>e("/purchase-bill")}),n.a.createElement($,{title:"Sell Bill",subtitle:"Track customer sales",gradient:"from-indigo-500 to-blue-600",icon:"\ud83d\udcb0",onClick:()=>e("/sell-bill")}),n.a.createElement($,{title:"Return Bill",subtitle:"Manage product returns",gradient:"from-purple-500 to-fuchsia-600",icon:"\ud83d\udd04",onClick:()=>e("/return-bill")}),n.a.createElement($,{title:"Expiry Bill",subtitle:"Handle expired stock",gradient:"from-rose-500 to-pink-600",icon:"\u26a0\ufe0f",onClick:()=>e("/expiry-bill")})),n.a.createElement("div",{className:"text-center bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-lg border border-white"},n.a.createElement("h3",{className:"text-2xl font-semibold text-gray-900 mb-4"},"Need Assistance?"),n.a.createElement("p",{className:"text-gray-700 mb-6"},"Our support team is ready to help you optimize your billing processes."),n.a.createElement("div",{className:"flex justify-center space-x-4"},n.a.createElement("button",{className:"px-6 py-2 bg-gray-900 text-white rounded-full hover:bg-gray-800 transition-all"},"Contact Support"),n.a.createElement("button",{className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-full hover:border-gray-400 transition-all",onClick:()=>e("/documentation/bill-generation")},"Documentation")))))},B=a(8);a(13);var q=()=>{const e=d(),[t,a]=(Object(i.p)(),Object(r.useState)([{itemName:"",batch:"",expiryDate:"",pack:"",quantity:"",purchaseRate:"",mrp:"",gstPercentage:"",discount:"",totalAmount:"",discountAmount:"",gstAmount:"",netAmount:""}])),[l,o]=Object(r.useState)({supplierInvoiceNumber:"",receiptNumber:"",partyName:"",date:""}),[s,c]=Object(r.useState)("");Object(r.useEffect)(()=>{if(!e)return;const t=e=>{console.log("Inventory update received in purchase form:",e),s.includes("successfully")&&setTimeout(()=>{c("")},3e3)};return e.on(g.INVENTORY_UPDATE,t),()=>{e.off(g.INVENTORY_UPDATE,t)}},[e,s]);const m=(e,r)=>{const{name:n,value:l}=r.target,o=[...t];if(o[e][n]=l,["quantity","purchaseRate","discount","gstPercentage"].includes(n)){const t=(e=>{const t=parseFloat(e.quantity||0)*parseFloat(e.purchaseRate||0),a=t*parseFloat(e.discount||0)/100,r=t-a,n=r*parseFloat(e.gstPercentage||0)/100,l=r+n;return{totalAmount:t.toFixed(2),discountAmount:a.toFixed(2),gstAmount:n.toFixed(2),netAmount:l.toFixed(2)}})(o[e]);o[e]={...o[e],...t}}a(o)},u=e=>{const{name:t,value:a}=e.target;o({...l,[t]:a})},p={totalAmount:t.reduce((e,t)=>e+parseFloat(t.totalAmount||0),0).toFixed(2),discountAmount:t.reduce((e,t)=>e+parseFloat(t.discountAmount||0),0).toFixed(2),gstAmount:t.reduce((e,t)=>e+parseFloat(t.gstAmount||0),0).toFixed(2),netAmount:t.reduce((e,t)=>e+parseFloat(t.netAmount||0),0).toFixed(2)};return n.a.createElement("div",{className:"container mx-auto p-8 bg-gradient-to-r from-blue-50 via-white to-blue-50 shadow-2xl rounded-xl"},n.a.createElement("h2",{className:"text-4xl font-bold text-center text-blue-600 mb-10"},"Create Purchase Bill"),n.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-10"},n.a.createElement("input",{type:"text",name:"supplierInvoiceNumber",placeholder:"Supplier Invoice Number",value:l.supplierInvoiceNumber,onChange:u,className:"border border-gray-300 p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md"}),n.a.createElement("input",{type:"text",name:"receiptNumber",placeholder:"Receipt Number",value:l.receiptNumber,onChange:u,className:"border border-gray-300 p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md"}),n.a.createElement("input",{type:"text",name:"partyName",placeholder:"Party Name",value:l.partyName,onChange:u,className:"border border-gray-300 p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md"}),n.a.createElement("input",{type:"date",name:"date",value:l.date,onChange:u,className:"border border-gray-300 p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-md"})),n.a.createElement("div",{className:"overflow-auto mb-10"},n.a.createElement("table",{className:"table-auto w-full text-sm shadow-lg border-collapse border border-gray-200"},n.a.createElement("thead",{className:"bg-blue-100 text-blue-600"},n.a.createElement("tr",null,["Item Name","Batch","Expiry Date","Pack","Quantity","Purchase Rate","MRP","GST (%)","Discount (%)","Total Amount","Discount Amount","GST Amount","Net Amount"].map((e,t)=>n.a.createElement("th",{key:t,className:"border border-gray-300 p-3 text-left font-semibold"},e)))),n.a.createElement("tbody",null,t.map((e,t)=>n.a.createElement("tr",{key:t,className:"bg-white hover:bg-gray-100"},Object.keys(e).map((a,r)=>n.a.createElement("td",{key:r,className:"border border-gray-300 p-3"},n.a.createElement("input",{type:["quantity","purchaseRate","mrp","gstPercentage","discount","totalAmount","discountAmount","gstAmount","netAmount"].includes(a)?"number":"expiryDate"===a?"date":"text",name:a,value:e[a],onChange:e=>m(t,e),placeholder:a,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",readOnly:["totalAmount","discountAmount","gstAmount","netAmount"].includes(a)})))))),n.a.createElement("tfoot",{className:"bg-blue-50"},n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"9",className:"border border-gray-300 p-3 text-right font-bold text-blue-600"},"Totals:"),n.a.createElement("td",{className:"border border-gray-300 p-3 text-right font-bold text-blue-600"},p.totalAmount),n.a.createElement("td",{className:"border border-gray-300 p-3 text-right font-bold text-blue-600"},p.discountAmount),n.a.createElement("td",{className:"border border-gray-300 p-3 text-right font-bold text-blue-600"},p.gstAmount),n.a.createElement("td",{className:"border border-gray-300 p-3 text-right font-bold text-blue-600"},p.netAmount))))),n.a.createElement("div",{className:"flex justify-between gap-6"},n.a.createElement("button",{onClick:()=>{a([...t,{itemName:"",batch:"",expiryDate:"",pack:"",quantity:"",purchaseRate:"",mrp:"",gstPercentage:"",discount:"",totalAmount:"",discountAmount:"",gstAmount:"",netAmount:""}])},className:"bg-blue-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-600 transition-shadow shadow-md"},"Add Item"),n.a.createElement("button",{onClick:async()=>{const r=localStorage.getItem("email"),n=localStorage.getItem("token");if(!r||!n)return void c("User is not authenticated. Please log in again.");const s=t.reduce((e,t)=>e+parseFloat(t.totalAmount||0),0),i=s,m=t.reduce((e,t)=>e+parseFloat(t.discountAmount||0),0),d=t.reduce((e,t)=>e+parseFloat(t.gstAmount||0),0),u=t.reduce((e,t)=>e+parseFloat(t.netAmount||0),0),p={...l,purchaseAmount:s,totalAmount:i,discountAmount:m,gstAmount:d,netAmount:u,email:r,items:t.map(e=>({...e,quantity:parseFloat(e.quantity||0),purchaseRate:parseFloat(e.purchaseRate||0),discount:parseFloat(e.discount||0),gstPercentage:parseFloat(e.gstPercentage||0),totalAmount:parseFloat(e.totalAmount||0),discountAmount:parseFloat(e.discountAmount||0),gstAmount:parseFloat(e.gstAmount||0),netAmount:parseFloat(e.netAmount||0)}))};try{const s=await fetch("https://medicine-inventory-management-backend.onrender.com/api/bills/purchase",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(p)});if(s.ok)c("Purchase bill created and inventory updated successfully!"),(()=>{const e=new B.a;e.setFontSize(16),e.text("Purchase Bill",14,15),e.setFontSize(10),e.text(`Supplier Invoice: ${l.supplierInvoiceNumber}`,14,25),e.text(`Receipt Number: ${l.receiptNumber}`,14,30),e.text(`Party Name: ${l.partyName}`,14,35),e.text(`Date: ${l.date}`,14,40);const a=t.map(e=>[e.itemName,e.batch,e.quantity,e.purchaseRate,e.totalAmount,e.discountAmount,e.gstAmount,e.netAmount]),r={totalAmount:t.reduce((e,t)=>e+parseFloat(t.totalAmount||0),0).toFixed(2),discountAmount:t.reduce((e,t)=>e+parseFloat(t.discountAmount||0),0).toFixed(2),gstAmount:t.reduce((e,t)=>e+parseFloat(t.gstAmount||0),0).toFixed(2),netAmount:t.reduce((e,t)=>e+parseFloat(t.netAmount||0),0).toFixed(2)};a.push(["","","","Total:",r.totalAmount,r.discountAmount,r.gstAmount,r.netAmount]),e.autoTable({startY:45,head:[["Item Name","Batch","Quantity","Rate","Total","Discount","GST","Net Amount"]],body:a,theme:"grid",headStyles:{fillColor:[41,128,185]},styles:{fontSize:8}}),e.save("PurchaseBill.pdf")})(),e&&e.emit("purchase_bill_created",{email:r,items:p.items,timestamp:(new Date).toISOString()}),a([{itemName:"",batch:"",expiryDate:"",pack:"",quantity:"",purchaseRate:"",mrp:"",gstPercentage:"",discount:"",totalAmount:"",discountAmount:"",gstAmount:"",netAmount:""}]),o({supplierInvoiceNumber:"",receiptNumber:"",partyName:"",date:""}),setTimeout(()=>{c("")},3e3);else{const e=await s.json();c(`Failed to create purchase bill: ${e.message||"Unknown error"}`)}}catch(g){c(`Error occurred while creating the purchase bill: ${g.message}`)}},className:"bg-green-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-600 transition-shadow shadow-md"},"Create Purchase Bill")),s&&n.a.createElement("p",{className:`mt-6 text-center font-semibold py-3 px-6 rounded-lg ${s.includes("successfully")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`},s))};var M=()=>{const[e,t]=Object(r.useState)({saleInvoiceNumber:"",date:(new Date).toISOString().split("T")[0],receiptNumber:"",partyName:"",email:"",gstNumber:""}),[a,l]=Object(r.useState)(""),[o,s]=Object(r.useState)(!1),[i,c]=Object(r.useState)([]),[m,d]=Object(r.useState)(!1),[u,p]=Object(r.useState)(!1),[g,x]=Object(r.useState)(null),{items:b,updateItem:y,addItem:h,resetItems:f}=(e=>{const t=[{itemName:"",batch:"",batchOptions:[],availableQuantity:0,quantity:"",mrp:"",discount:"",amount:"",gstNo:e,gstPercentage:"0"}],[a,n]=Object(r.useReducer)((t,a)=>{switch(a.type){case"UPDATE_ITEM":return t.map((e,t)=>t===a.index?{...e,...a.payload}:e);case"ADD_ITEM":return[...t,{itemName:"",batch:"",batchOptions:[],availableQuantity:0,quantity:"",mrp:"",discount:"",amount:"",gstNo:e,gstPercentage:"0"}];case"RESET_ITEMS":return[{itemName:"",batch:"",batchOptions:[],availableQuantity:0,quantity:"",mrp:"",discount:"",amount:"",gstNo:e,gstPercentage:"0"}];case"UPDATE_ALL_GST":return t.map(e=>({...e,gstNo:a.payload}));default:return t}},t);return Object(r.useEffect)(()=>{n({type:"UPDATE_ALL_GST",payload:e})},[e]),{items:a,updateItem:(e,t)=>{n({type:"UPDATE_ITEM",index:e,payload:t})},addItem:()=>{n({type:"ADD_ITEM"})},resetItems:()=>{n({type:"RESET_ITEMS"})}}})(e.gstNumber);Object(r.useEffect)(()=>{(async()=>{try{const a=localStorage.getItem("token"),r=localStorage.getItem("email");console.log("Fetching next invoice number with token:",a),console.log("User email:",r);const n=await fetch("https://medicine-inventory-management-backend.onrender.com/api/bills/next-invoice-number",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({email:r})});console.log("Response status:",n.status);const o=await n.json();if(console.log("Response data:",o),!n.ok)throw new Error(o.message||"Failed to fetch next invoice number");t(e=>({...e,saleInvoiceNumber:o.invoiceNumber,date:(new Date).toISOString().split("T")[0],receiptNumber:"",partyName:"",email:"",gstNumber:""}))}catch(e){console.error("Error fetching next invoice number:",e),l(e.message),t(e=>({...e,saleInvoiceNumber:"INV001",date:(new Date).toISOString().split("T")[0],receiptNumber:"",partyName:"",email:"",gstNumber:""}))}})()},[]);const E=async()=>{const e=await(async()=>{try{const t=localStorage.getItem("token"),a=localStorage.getItem("email");console.log("Generating next invoice number with:",{token:t,email:a});const r=await fetch("https://medicine-inventory-management-backend.onrender.com/api/bills/next-invoice-number",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({email:a})});console.log("Response status:",r.status);const n=await r.json();return console.log("Response data:",n),r.ok?n.invoiceNumber:(l(`Error generating next invoice number: ${n.message||"Unknown error"}`),null)}catch(e){return console.error("Error in generateNextInvoiceNumber:",e),l(`Error generating next invoice number: ${e.message}`),null}})();e&&t(t=>({...t,saleInvoiceNumber:e,receiptNumber:"",partyName:"",email:"",gstNumber:"",date:(new Date).toISOString().split("T")[0]}))},N=Object(r.useCallback)(((e,t)=>{let a;return function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];clearTimeout(a),a=setTimeout(()=>e(...n),t)}})(async(t,a,r)=>{if(t&&a){d(!0);try{const m=localStorage.getItem("token"),u=await fetch(`https://medicine-inventory-management-backend.onrender.com/api/inventory?itemName=${encodeURIComponent(t.toLowerCase())}&email=${encodeURIComponent(a)}`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Error ${u.status}: ${await u.text()}`);const g=await u.json();if(g.length>0){var n,o,s;c(g),p(!0);const t=g.map(t=>({batchNumber:t.batch.replace(/[^a-zA-Z0-9]/g,""),quantity:t.quantity,mrp:t.mrp,purchaseRate:t.purchaseRate,gstNo:e.gstNumber,expiryDate:t.expiryDate})),a=g[0].batch.replace(/[^a-zA-Z0-9]/g,"");y(r,{batchOptions:t,batch:a,availableQuantity:g[0].quantity,mrp:(null===(n=g[0].mrp)||void 0===n?void 0:n.toString())||"",purchaseRate:(null===(o=g[0].purchaseRate)||void 0===o?void 0:o.toString())||"",gstPercentage:(null===(s=g[0].gstPercentage)||void 0===s?void 0:s.toString())||"0",expiryDate:g[0].expiryDate}),l("")}else c([]),p(!1),l(`No inventory found for ${t}`),y(r,{batchOptions:[],batch:"",availableQuantity:0,mrp:"",purchaseRate:"",gstPercentage:"0",expiryDate:""})}catch(i){console.error("Error fetching inventory:",i),l(`Error fetching inventory data: ${i.message}`),c([]),p(!1)}finally{d(!1)}}},300),[e.gstNumber,y]),v=(e,t)=>{const{name:a,value:r}=t.target,n=localStorage.getItem("email");if("itemName"===a)return y(e,{itemName:r}),void(r&&n?(x(e),N(r,n,e)):p(!1));if("batch"===a){const t=b[e],a=r.replace(/[^a-zA-Z0-9]/g,""),n=t.batchOptions.find(e=>e.batchNumber===a);var o,s,i;return void(n&&y(e,{batch:a,availableQuantity:n.quantity,mrp:(null===(o=n.mrp)||void 0===o?void 0:o.toString())||"",purchaseRate:(null===(s=n.purchaseRate)||void 0===s?void 0:s.toString())||"",gstPercentage:(null===(i=n.gstPercentage)||void 0===i?void 0:i.toString())||"0",expiryDate:n.expiryDate}))}y(e,{[a]:r});const c=b[e],m=parseFloat(c.quantity)||0,d=parseFloat(c.mrp)||0,u=parseFloat(c.discount)||0,g=parseFloat(c.gstPercentage)||0;if(m>c.availableQuantity)l({type:"error",text:`Insufficient stock for ${c.itemName}`});else if(m<=0)l({type:"error",text:"Quantity must be greater than 0"});else{const t=m*d,a=t*u/100,r=t-a,n=r*g/100,o=n/2,s=n/2,i=0,c=r+n;y(e,{amount:c.toFixed(2),totalAmount:t.toFixed(2),discountAmount:a.toFixed(2),gstAmount:n.toFixed(2),sgst:o.toFixed(2),cgst:s.toFixed(2),igst:i.toFixed(2),totalGst:n.toFixed(2),netAmount:c.toFixed(2)}),l("")}},w=a=>{const{name:r,value:n}=a.target;"saleInvoiceNumber"!==r&&t({...e,[r]:n})};Object(r.useEffect)(()=>{const e=()=>{p(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]);return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-6"},n.a.createElement("div",{className:"max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-8"},n.a.createElement("div",{className:"mb-8 text-center"},n.a.createElement("h2",{className:"text-3xl font-bold text-indigo-600 mb-2"},"Create Sales Invoice"),n.a.createElement("div",{className:"h-1 w-20 bg-indigo-500 mx-auto rounded-full"})),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"},n.a.createElement("div",{className:"space-y-4"},n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("label",{className:"text-sm font-medium text-gray-700 mb-1"},"GST Number"),n.a.createElement("input",{type:"text",name:"gstNumber",placeholder:"Enter GST Number",className:"rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors",value:e.gstNumber,onChange:w,required:!0})),n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("label",{className:"text-sm font-medium text-gray-700 mb-1"},"Party Name"),n.a.createElement("input",{type:"text",name:"partyName",placeholder:"Enter Party Name",className:"rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors",value:e.partyName,onChange:w}))),n.a.createElement("div",{className:"space-y-4"},n.a.createElement("div",{className:"grid grid-cols-2 gap-4"},n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("label",{className:"text-sm font-medium text-gray-700 mb-1"},"Invoice Number"),n.a.createElement("input",{type:"text",name:"saleInvoiceNumber",value:e.saleInvoiceNumber,className:"rounded-lg border-2 border-indigo-100 bg-gray-100 p-3 transition-colors",readOnly:!0})),n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("label",{className:"text-sm font-medium text-gray-700 mb-1"},"Date"),n.a.createElement("input",{type:"date",name:"date",className:"rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors",value:e.date,onChange:w}))),n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("label",{className:"text-sm font-medium text-gray-700 mb-1"},"Receipt Number"),n.a.createElement("input",{type:"text",name:"receiptNumber",placeholder:"Receipt #",className:"rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors",value:e.receiptNumber,onChange:w})))),n.a.createElement("div",{className:"mb-8"},n.a.createElement("h3",{className:"text-xl font-semibold text-indigo-600 mb-4"},"Item Details"),n.a.createElement("div",{className:"rounded-xl border-2 border-indigo-50 "},n.a.createElement("table",{className:"w-full"},n.a.createElement("thead",{className:"bg-indigo-600 text-white"},n.a.createElement("tr",null,["Item Name","Batch","Available","Qty","Purchase Rate","MRP","Discount%","GST %","Expiry Date","Amount"].map((e,t)=>n.a.createElement("th",{key:t,className:"px-4 py-3 text-left text-sm font-medium last:text-right"},e)))),n.a.createElement("tbody",{className:"divide-y divide-indigo-50"},b.map((e,t)=>{var a,r;return n.a.createElement("tr",{key:t,className:"hover:bg-indigo-50 transition-colors"},n.a.createElement("td",{className:"px-4 py-3 relative"},n.a.createElement("input",{type:"text",name:"itemName",value:e.itemName,onChange:e=>v(t,e),className:"w-full rounded-md border-indigo-100 focus:border-indigo-500 focus:ring-indigo-500",onClick:a=>{a.stopPropagation(),x(t),e.itemName&&p(!0)}}),u&&g===t&&n.a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",onClick:e=>e.stopPropagation()},m?n.a.createElement("div",{className:"p-2 text-center text-gray-500"},n.a.createElement("svg",{className:"animate-spin h-5 w-5 mx-auto",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))):i.length>0?n.a.createElement("ul",null,i.map((e,t)=>n.a.createElement("li",{key:t,className:"px-4 py-2 hover:bg-indigo-50 cursor-pointer",onClick:()=>(e=>{null!==g&&(y(g,{itemName:e}),p(!1))})(e.itemName)},e.itemName))):n.a.createElement("div",{className:"p-2 text-center text-gray-500"},"No results found"))),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("select",{name:"batch",value:e.batch,onChange:e=>v(t,e),className:"w-full rounded-md border-indigo-100 focus:border-indigo-500 focus:ring-indigo-500"},n.a.createElement("option",{value:""},"Select Batch"),e.batchOptions.map((e,t)=>n.a.createElement("option",{key:t,value:e.batchNumber},e.batchNumber.replace(/[^a-zA-Z0-9]/g,""))))),n.a.createElement("td",{className:"px-4 py-3 text-center"},null!==(a=null===(r=e.availableQuantity)||void 0===r?void 0:r.toString())&&void 0!==a?a:"-"),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("input",{type:"number",name:"quantity",value:e.quantity,onChange:e=>v(t,e),className:"w-full rounded-md border-indigo-100 focus:border-indigo-500 focus:ring-indigo-500",min:"0"})),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("span",{className:"text-gray-500 mr-1"},"\u20b9"),n.a.createElement("input",{type:"number",name:"purchaseRate",value:e.purchaseRate,readOnly:!0,className:"w-24 px-2 py-1 text-sm text-center bg-gray-50 border border-gray-300 rounded-md"}))),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("input",{type:"number",name:"mrp",value:e.mrp,disabled:!0,className:"w-full rounded-md bg-indigo-50 border-indigo-100"})),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("input",{type:"number",name:"discount",value:e.discount,onChange:e=>v(t,e),className:"w-full rounded-md border-indigo-100 focus:border-indigo-500 focus:ring-indigo-500",min:"0",max:"100"})),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("input",{type:"number",name:"gstPercentage",value:e.gstPercentage,onChange:e=>v(t,e),step:"0.01",min:"0",max:"100",className:"w-16 px-2 py-1 text-sm text-center border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),n.a.createElement("span",{className:"text-gray-500 ml-1"},"%"))),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("input",{type:"date",name:"expiryDate",value:e.expiryDate?new Date(e.expiryDate).toISOString().split("T")[0]:"",readOnly:!0,className:"w-full rounded-md bg-indigo-50 border-indigo-100"})),n.a.createElement("td",{className:"px-4 py-3 text-right font-medium text-emerald-600"},e.amount||"-"))}))))),n.a.createElement("div",{className:"flex justify-between items-center"},n.a.createElement("button",{onClick:h,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors flex items-center"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})),"Add Item"),n.a.createElement("div",{className:"space-x-4"},a&&n.a.createElement("div",{className:`inline-flex items-center px-4 py-2 rounded-lg ${"success"===a.type?"bg-green-100 text-green-700":"bg-rose-100 text-rose-700"}`},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-2 ${"success"===a.type?"text-green-500":"text-rose-500"}`,viewBox:"0 0 20 20",fill:"currentColor"},"success"===a.type?n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}):n.a.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})),a.text),n.a.createElement("button",{onClick:async()=>{const t=localStorage.getItem("token"),a=localStorage.getItem("email");if(!e.gstNumber)return void l({type:"error",text:"GST Number is required"});if(b.some(t=>t.gstNo!==e.gstNumber))return void l({type:"error",text:"All items must have the same GST Number"});if(b.some(e=>e.availableQuantity<Number(e.quantity)||Number(e.quantity)<=0))return void l({type:"error",text:"Invalid quantities detected"});const r=b.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),n=b.reduce((e,t)=>e+(parseFloat(t.discountAmount)||0),0),o=b.reduce((e,t)=>e+(parseFloat(t.gstAmount)||0),0),i=b.reduce((e,t)=>e+(parseFloat(t.amount)||0),0),c={...e,items:b.map(t=>{let{batchOptions:a,availableQuantity:r,...n}=t;return{...n,quantity:Number(n.quantity),mrp:Number(n.mrp),discount:Number(n.discount),gstPercentage:Number(n.gstPercentage),gstNo:e.gstNumber,amount:Number(n.amount),totalAmount:Number(n.totalAmount),discountAmount:Number(n.discountAmount),gstAmount:Number(n.gstAmount),netAmount:Number(n.netAmount)}}),totalAmount:r,discountAmount:n,sgstAmount:o/2,cgstAmount:o/2,igstAmount:0,totalGstAmount:o,netAmount:i,email:a};try{s(!0);const a=await fetch("https://medicine-inventory-management-backend.onrender.com/api/bills/sale",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(c)}),r=await a.json();a.ok?(l({type:"success",text:"Invoice created successfully!"}),(()=>{const t=new B.a;t.setFillColor(41,128,185),t.rect(0,0,210,40,"F"),t.setTextColor(255,255,255),t.setFontSize(20),t.text("Sales Invoice",105,20,{align:"center"}),t.setFontSize(10),t.text("Medicine Inventory Management System",105,30,{align:"center"}),t.setTextColor(0,0,0),t.setFontSize(12),t.text(`Invoice Number: ${e.saleInvoiceNumber||"INV001"}`,20,50),t.text(`Date: ${e.date}`,20,60),t.text(`Receipt Number: ${e.receiptNumber}`,20,70),t.setFontSize(12),t.text("Party Details:",20,85),t.setFontSize(10),t.text(`Name: ${e.partyName}`,20,95),t.text(`GST Number: ${e.gstNumber}`,20,100);const a=b.map(e=>[e.itemName,e.batch,e.quantity,`\u20b9${parseFloat(e.purchaseRate).toFixed(2)}`,`\u20b9${parseFloat(e.mrp).toFixed(2)}`,`${e.discount}%`,`${e.gstPercentage}%`,e.expiryDate?new Date(e.expiryDate).toISOString().split("T")[0]:"-",`\u20b9${parseFloat(e.amount).toFixed(2)}`]);t.autoTable({head:[["Item Name","Batch","Qty","Purchase Rate","MRP","Disc%","GST%","Expiry Date","Amount"]],body:a,startY:110,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,fontStyle:"bold",halign:"center"},bodyStyles:{fontSize:9,halign:"center"},alternateRowStyles:{fillColor:[240,240,240]},columnStyles:{0:{cellWidth:35},1:{cellWidth:15},2:{cellWidth:10},3:{cellWidth:20},4:{cellWidth:15},5:{cellWidth:10},6:{cellWidth:10},7:{cellWidth:20},8:{cellWidth:20}},styles:{cellPadding:2,fontSize:9,valign:"middle"},margin:{left:20,right:20}});const r=t.lastAutoTable.finalY+20;t.setFontSize(12),t.text("Bill Summary",20,r);const n=b.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),l=b.reduce((e,t)=>e+(parseFloat(t.discountAmount)||0),0),o=b.reduce((e,t)=>e+(parseFloat(t.gstAmount)||0),0),s=b.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);t.setFontSize(10),t.text(`Total Amount: \u20b9${n.toFixed(2)}`,20,r+10),t.text(`Total Discount: \u20b9${l.toFixed(2)}`,20,r+20),t.text(`Total GST: \u20b9${o.toFixed(2)}`,20,r+30),t.setFontSize(12),t.setFont(void 0,"bold"),t.text(`Net Amount: \u20b9${s.toFixed(2)}`,20,r+45),t.setFontSize(8),t.setTextColor(100,100,100),t.text("This is a computer-generated document. No signature required.",105,280,{align:"center"}),t.setFontSize(8),t.text("Terms and Conditions:",20,290),t.setFontSize(7),t.text("1. Goods once sold will not be taken back.",20,295),t.text("2. Subject to local jurisdiction.",20,300);const i=e.saleInvoiceNumber||"INV001";t.save(`SalesInvoice_${i}.pdf`)})(),f(),E()):l({type:"error",text:r.message||"Failed to create invoice"})}catch(m){l({type:"error",text:"Error creating invoice"})}finally{s(!1)}},className:"px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-semibold transition-all transform hover:scale-105",disabled:o},o?n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):"Create Sales Invoice")))))};const z=e=>{let{title:t,subtitle:a,gradient:r,icon:l,onClick:o,loading:s}=e;return n.a.createElement("button",{onClick:o,disabled:s,className:`relative group bg-gradient-to-br ${r} text-white p-6 rounded-2xl shadow-lg transition transform hover:-translate-y-2 hover:shadow-2xl active:scale-95 w-full`},s?n.a.createElement("div",{className:"flex justify-center items-center space-x-2"},n.a.createElement("div",{className:"w-5 h-5 border-4 border-white border-dashed rounded-full animate-spin"}),n.a.createElement("span",{className:"font-semibold"},"Loading...")):n.a.createElement("div",{className:"flex items-start space-x-4"},n.a.createElement("span",{className:"text-4xl bg-white/20 p-4 rounded-lg"},l),n.a.createElement("div",{className:"text-left"},n.a.createElement("h3",{className:"text-2xl font-bold mb-1"},t),n.a.createElement("p",{className:"text-white/90"},a))))};var V=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)(null),l=t=>{a(t),setTimeout(()=>{e("purchase"===t?"/purchase-return":"/sale-return")},1e3)};return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 flex flex-col items-center justify-center p-8 relative overflow-hidden"},n.a.createElement("div",{className:"absolute -top-32 -right-32 w-96 h-96 bg-purple-300 rounded-full opacity-20 mix-blend-multiply filter blur-3xl animate-[blob_8s_infinite]"}),n.a.createElement("div",{className:"absolute -bottom-32 -left-32 w-96 h-96 bg-blue-300 rounded-full opacity-20 mix-blend-multiply filter blur-3xl animate-[blob_8s_infinite_2s]"}),n.a.createElement("div",{className:"relative z-10 max-w-5xl w-full"},n.a.createElement("div",{className:"text-center mb-12 space-y-6"},n.a.createElement("h2",{className:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600"},"Return Bill Management"),n.a.createElement("p",{className:"text-xl text-gray-700"},"Choose between handling purchase returns or sale returns.")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-12"},n.a.createElement(z,{title:"Purchase Return",subtitle:"Return items to suppliers",gradient:"from-orange-500 to-red-500",icon:"\ud83d\udce6",loading:"purchase"===t,onClick:()=>l("purchase")}),n.a.createElement(z,{title:"Sale Return",subtitle:"Handle customer returns",gradient:"from-green-500 to-teal-500",icon:"\ud83d\udd04",loading:"sale"===t,onClick:()=>l("sale")})),n.a.createElement("div",{className:"bg-gradient-to-br from-blue-100 via-pink-100 to-purple-100 border border-blue-300/30 backdrop-blur-xl p-10 rounded-3xl shadow-xl text-center"},n.a.createElement("h3",{className:"text-3xl font-bold text-gray-900 mb-3"},"Need Assistance?"),n.a.createElement("p",{className:"text-gray-700 mb-6 font-medium"},"Our support team is available to guide you through any return process."),n.a.createElement("div",{className:"flex justify-center gap-4 flex-wrap"},n.a.createElement("button",{className:"px-6 py-3 bg-gradient-to-r from-blue-700 to-purple-700 text-white rounded-full font-semibold hover:opacity-90 transition"},"Contact Support"),n.a.createElement("button",{onClick:()=>e("/documentation/return-bills"),className:"px-6 py-3 border border-gray-400 text-gray-800 bg-white/60 rounded-full font-semibold hover:bg-white/80 transition"},"View Documentation")))))};const U="https://medicine-inventory-management-backend.onrender.com";var _=()=>{const[e,t]=Object(r.useState)({email:"",date:(new Date).toISOString().split("T")[0],receiptNumber:"",supplierName:"",supplierGST:"",items:[{itemName:"",batch:"",quantity:0,purchaseRate:0,mrp:0,discount:0,gstPercentage:0,expiryDate:"",returnableQuantity:0,originalPurchaseQuantity:0,soldQuantity:0,returnedQuantity:0,currentInventoryQuantity:0}]}),[a,l]=Object(r.useState)([]),[o,s]=Object(r.useState)([]),[i,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(""),[x,b]=Object(r.useState)(!1),[y,h]=Object(r.useState)({totalAmount:0,totalDiscount:0,totalGST:0,netAmount:0});Object(r.useEffect)(()=>{const e=localStorage.getItem("email");e&&t(t=>({...t,email:e}))},[]),Object(r.useEffect)(()=>{const e=p.a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});return()=>p.a.interceptors.request.eject(e)},[]),Object(r.useEffect)(()=>{e.email&&(async()=>{if(e.email)try{console.log("Fetching inventory for email:",e.email);const o=await p.a.get(`${U}/api/inventory/${e.email}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Inventory response:",o.data);const s=[...new Set(o.data.map(e=>e.partyName))];console.log("Unique suppliers:",s),0===s.length?(d("No inventory items found. Please add items to inventory first."),l([])):(l(s.map(e=>({name:e}))),d(""))}catch(n){var t,a,r;console.error("Error fetching suppliers:",n),404===(null===(t=n.response)||void 0===t?void 0:t.status)?d("No inventory items found. Please add items to inventory first."):d((null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Error fetching suppliers. Please try again."),l([])}})()},[e.email]);const f=async()=>{if(e.supplierName&&e.email)try{c(!0),d("");const l=await p.a.get(`${U}/api/purchase-returns/returnable-quantities`,{params:{email:e.email,supplierName:e.supplierName},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});0===l.data.length?(d("No returnable items found for this supplier."),s([])):(s(l.data),b(!0))}catch(n){var t,a,r;console.error("Error fetching returnable quantities:",n),404===(null===(t=n.response)||void 0===t?void 0:t.status)?d("No returnable items found for this supplier."):d((null===(a=n.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Error loading bills. Please try again."),s([])}finally{c(!1)}else d("Please enter supplier name")},E=a=>{const{name:r,value:n}=a.target;t({...e,[r]:n}),"supplierName"===r&&(b(!1),s([]))},N=(a,r)=>{const{name:n,value:l}=r.target,s=[...e.items];if(s[a]={...s[a],[n]:l},"itemName"===n){s[a].batch="";const e=o.find(e=>e.itemName.toLowerCase()===l.toLowerCase());if(e){const t=new Date;if(new Date(e.expiryDate)<t)return void d(`Item ${e.itemName} (Batch: ${e.batch}) has expired on ${e.expiryDate}`);s[a]={...s[a],returnableQuantity:e.returnableQuantity,originalPurchaseQuantity:e.originalPurchaseQuantity,soldQuantity:e.soldQuantity,returnedQuantity:e.returnedQuantity,currentInventoryQuantity:e.currentInventoryQuantity,purchaseRate:e.purchaseRate||0,mrp:e.mrp||0,expiryDate:e.expiryDate||"",gstPercentage:e.gstPercentage||0,discount:e.discount||0}}}if("batch"===n&&l){const e=o.find(e=>e.itemName.toLowerCase()===s[a].itemName.toLowerCase()&&e.batch.toLowerCase()===l.toLowerCase());if(e){const t=new Date;if(new Date(e.expiryDate)<t)return void d(`Item ${e.itemName} (Batch: ${e.batch}) has expired on ${e.expiryDate}`);s[a]={...s[a],returnableQuantity:e.returnableQuantity,originalPurchaseQuantity:e.originalPurchaseQuantity,soldQuantity:e.soldQuantity,returnedQuantity:e.returnedQuantity,currentInventoryQuantity:e.currentInventoryQuantity,purchaseRate:e.purchaseRate||0,mrp:e.mrp||0,expiryDate:e.expiryDate||"",gstPercentage:e.gstPercentage||0,discount:e.discount||0}}}t({...e,items:s}),v()},v=()=>{let t=0,a=0,r=0;e.items.forEach(e=>{if(e.quantity&&e.purchaseRate){const n=e.quantity*e.purchaseRate,l=n*e.discount/100,o=(n-l)*e.gstPercentage/100;t+=n,a+=l,r+=o}}),h({totalAmount:t,totalDiscount:a,totalGST:r,netAmount:t-a+r})};return n.a.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.a.createElement("div",{className:"max-w-[95%] mx-auto px-4 sm:px-6 lg:px-8"},n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8"},n.a.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-8"},"Create Purchase Return Bill"),m&&n.a.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},m),u&&n.a.createElement("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"},u),n.a.createElement("button",{onClick:async()=>{try{const t={itemName:"Test Medicine",batch:"BATCH001",partyName:"ABC Pharmaceuticals",expiryDate:new Date(Date.now()+31536e6).toISOString().split("T")[0],pack:"Strip",quantity:100,purchaseRate:10,mrp:15,gstPercentage:12,email:e.email},a=await p.a.post(`${U}/api/inventory`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return console.log("Test inventory item created:",a.data),a.data}catch(m){throw console.error("Error creating test inventory item:",m),m}},className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Create Test Inventory Item"),n.a.createElement("form",{onSubmit:async a=>{if(a.preventDefault(),e.supplierName&&e.receiptNumber)if(e.items.length){for(const t of e.items){if(!t.itemName||!t.batch||!t.quantity)return void d("Please fill in all item details");const e=o.find(e=>e.itemName.toLowerCase()===t.itemName.toLowerCase()&&e.batch.toLowerCase()===t.batch.toLowerCase());if(!e)return void d(`Item ${t.itemName} (Batch: ${t.batch}) is not returnable`);if(t.quantity>e.returnableQuantity)return void d(`Return quantity exceeds returnable quantity for ${t.itemName} (Batch: ${t.batch})`)}try{c(!0),d("");const a=await p.a.post(`${U}/api/purchase-returns/create`,{...e,date:e.date});if(a.data.success){if(a.data.updatedReturnableQuantities&&s(a.data.updatedReturnableQuantities),t(e=>({...e,receiptNumber:"",items:[{itemName:"",batch:"",quantity:0,purchaseRate:0,mrp:0,discount:0,gstPercentage:0,expiryDate:"",returnableQuantity:0,originalPurchaseQuantity:0,soldQuantity:0,returnedQuantity:0,currentInventoryQuantity:0}]})),g("Purchase return bill created successfully"),a.data.pdfUrl)try{const e=await p.a.get(`${U}/api/purchase-returns${a.data.pdfUrl}`,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download",`${a.data.returnBill.returnInvoiceNumber}.pdf`),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(t)}catch(l){console.error("Error downloading PDF:",l),d("Bill created successfully but failed to download PDF. Please try downloading from the bills list.")}await f()}}catch(i){var r,n;console.error("Error creating purchase return bill:",i),d((null===(r=i.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Error creating purchase return bill")}finally{c(!1)}}else d("Please add at least one item");else d("Please fill in all required fields")},className:"space-y-8"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8"},n.a.createElement("div",{className:"relative group"},n.a.createElement("label",{className:"block text-lg font-semibold text-gray-700 mb-2"},"Email"),n.a.createElement("input",{type:"email",name:"email",value:e.email,className:"w-full px-5 py-4 text-lg border-2 border-indigo-200 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",readOnly:!0})),n.a.createElement("div",{className:"relative group"},n.a.createElement("label",{className:"block text-lg font-semibold text-gray-700 mb-2"},"Date"),n.a.createElement("input",{type:"date",name:"date",value:e.date,onChange:E,className:"w-full px-5 py-4 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0})),n.a.createElement("div",{className:"relative group"},n.a.createElement("label",{className:"block text-lg font-semibold text-gray-700 mb-2"},"Receipt Number"),n.a.createElement("input",{type:"text",name:"receiptNumber",value:e.receiptNumber,onChange:E,className:"w-full px-5 py-4 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0,placeholder:"Enter receipt number"})),n.a.createElement("div",{className:"relative group"},n.a.createElement("label",{className:"block text-lg font-semibold text-gray-700 mb-2"},"Supplier Name"),n.a.createElement("div",{className:"flex space-x-3"},n.a.createElement("input",{type:"text",name:"supplierName",value:e.supplierName,onChange:E,className:"w-full px-5 py-4 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",list:"suppliersList",required:!0,placeholder:"Select supplier"}),n.a.createElement("datalist",{id:"suppliersList"},a.map((e,t)=>n.a.createElement("option",{key:t,value:e.name}))),n.a.createElement("button",{type:"button",onClick:f,disabled:i||!e.supplierName,className:"px-6 py-4 text-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-300 shadow-md whitespace-nowrap"},i?"Loading...":"Load Bills"))),n.a.createElement("div",{className:"relative group"},n.a.createElement("label",{className:"block text-lg font-semibold text-gray-700 mb-2"},"Supplier GST"),n.a.createElement("input",{type:"text",name:"supplierGST",value:e.supplierGST,onChange:E,className:"w-full px-5 py-4 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0,placeholder:"Enter supplier GST"}))),n.a.createElement("div",{className:"mb-8 bg-white rounded-xl shadow-md p-6 border border-indigo-100"},n.a.createElement("div",{className:"flex justify-between items-center mb-6"},n.a.createElement("h2",{className:"text-2xl font-bold text-indigo-800"},"Items"),n.a.createElement("button",{type:"button",onClick:()=>{t({...e,items:[...e.items,{itemName:"",batch:"",quantity:0,purchaseRate:0,mrp:0,discount:0,gstPercentage:0,expiryDate:"",returnableQuantity:0,originalPurchaseQuantity:0,soldQuantity:0,returnedQuantity:0,currentInventoryQuantity:0}]})},className:"px-6 py-3 text-lg bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-300 shadow-md disabled:from-gray-400 disabled:to-gray-500",disabled:!x},n.a.createElement("span",{className:"flex items-center"},n.a.createElement("span",{className:"mr-2"},"+")," Add Item"))),n.a.createElement("div",{className:"overflow-x-auto bg-indigo-50 rounded-lg shadow-inner"},n.a.createElement("table",{className:"w-full divide-y divide-indigo-200 table-fixed"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white"},n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[15%]"},"Item Name"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Batch"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Quantity"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Returnable Qty"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Original Purchase"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Sold Qty"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Already Returned"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Purchase Rate"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"MRP"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Discount %"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"GST %"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[10%]"},"Expiry Date"),n.a.createElement("th",{className:"px-6 py-4 text-left text-lg font-medium uppercase tracking-wider w-[5%]"},"Action"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-indigo-100"},e.items.map((a,r)=>n.a.createElement("tr",{key:r,className:"hover:bg-indigo-50 transition-colors duration-150"},n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"text",name:"itemName",value:a.itemName,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0,disabled:!x,placeholder:"Enter item name"})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("select",{name:"batch",value:a.batch,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0,disabled:!a.itemName},n.a.createElement("option",{value:""},"Select Batch"),o.filter(e=>e.itemName.toLowerCase()===a.itemName.toLowerCase()).map((e,t)=>n.a.createElement("option",{key:t,value:e.batch},e.batch)))),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",name:"quantity",value:a.quantity,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",min:"1",max:a.returnableQuantity,required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",value:a.returnableQuantity,className:"w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-lg bg-gray-100",readOnly:!0})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",value:a.originalPurchaseQuantity,className:"w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-lg bg-gray-100",readOnly:!0})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",value:a.soldQuantity,className:"w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-lg bg-gray-100",readOnly:!0})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",value:a.returnedQuantity,className:"w-full px-4 py-3 text-lg border-2 border-gray-200 rounded-lg bg-gray-100",readOnly:!0})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",name:"purchaseRate",value:a.purchaseRate,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",min:"0",step:"0.01",required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",name:"mrp",value:a.mrp,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",min:"0",step:"0.01",required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"number",name:"discount",value:a.discount,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",min:"0",max:"100",step:"0.01",required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",name:"gstPercentage",value:a.gstPercentage,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",min:"0",max:"100",required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("input",{type:"date",name:"expiryDate",value:a.expiryDate,onChange:e=>N(r,e),className:"w-full px-4 py-3 text-lg border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0,disabled:!a.batch})),n.a.createElement("td",{className:"px-6 py-4"},n.a.createElement("button",{type:"button",onClick:()=>(a=>{const r=[...e.items];r.splice(a,1),t({...e,items:r})})(r),className:"text-red-600 hover:text-red-800 text-xl font-medium bg-red-100 hover:bg-red-200 p-2 rounded-full transition-colors duration-300"},"\xd7")))))))),n.a.createElement("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 rounded-xl p-6 shadow-md mb-8"},n.a.createElement("h3",{className:"text-xl font-bold text-indigo-800 mb-4"},"Bill Summary"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.a.createElement("div",{className:"bg-white rounded-lg p-4 shadow-sm"},n.a.createElement("label",{className:"block text-lg font-medium text-gray-700 mb-2"},"Total Amount"),n.a.createElement("input",{type:"number",value:y.totalAmount.toFixed(2),className:"w-full px-4 py-3 text-xl font-bold text-indigo-700 border-2 border-indigo-200 rounded-lg bg-indigo-50",readOnly:!0})),n.a.createElement("div",{className:"bg-white rounded-lg p-4 shadow-sm"},n.a.createElement("label",{className:"block text-lg font-medium text-gray-700 mb-2"},"Total Discount"),n.a.createElement("input",{type:"number",value:y.totalDiscount.toFixed(2),className:"w-full px-4 py-3 text-xl font-bold text-green-700 border-2 border-green-200 rounded-lg bg-green-50",readOnly:!0})),n.a.createElement("div",{className:"bg-white rounded-lg p-4 shadow-sm"},n.a.createElement("label",{className:"block text-lg font-medium text-gray-700 mb-2"},"Total GST"),n.a.createElement("input",{type:"number",value:y.totalGST.toFixed(2),className:"w-full px-4 py-3 text-xl font-bold text-blue-700 border-2 border-blue-200 rounded-lg bg-blue-50",readOnly:!0})),n.a.createElement("div",{className:"bg-white rounded-lg p-4 shadow-sm"},n.a.createElement("label",{className:"block text-lg font-medium text-gray-700 mb-2"},"Net Amount"),n.a.createElement("input",{type:"number",value:y.netAmount.toFixed(2),className:"w-full px-4 py-3 text-xl font-bold text-purple-700 border-2 border-purple-200 rounded-lg bg-purple-50",readOnly:!0})))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"submit",disabled:i,className:"px-8 py-4 text-lg bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:from-green-700 hover:to-teal-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-300 shadow-lg font-bold"},i?"Creating...":"Create Return Bill"))))))};var G=()=>{const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)(""),[o,s]=Object(r.useState)([]),[i,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)("search"),[x,b]=Object(r.useState)({searchTerm:"",expiryStatus:"all",sortBy:"itemName",sortOrder:"asc",dateRange:"all",priceRange:"all"}),y=async t=>{t.preventDefault(),c(!0),d("");try{const t=(await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/purchase-returns/returnable-quantities",{params:{email:e,supplierName:a}})).data.map(e=>({...e,totalPurchaseValue:e.purchasedQuantity*e.purchaseRate,totalSaleValue:e.soldQuantity*e.mrp,avgPrice:e.purchaseRate,expiryStatus:h(e.expiryDate)}));s(t),g("results")}catch(l){var r,n;d((null===(r=l.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Error fetching data")}finally{c(!1)}},h=e=>{const t=new Date,a=(new Date(e)-t)/2592e6;return a<0?"expired":a<3?"nearExpiry":"good"},f=Object(r.useMemo)(()=>o.filter(e=>{const t=e.itemName.toLowerCase().includes(x.searchTerm.toLowerCase())||e.batch.toLowerCase().includes(x.searchTerm.toLowerCase()),a="all"===x.expiryStatus||e.expiryStatus===x.expiryStatus,r="all"===x.dateRange||(()=>{const t=new Date(e.purchaseDate),a=new Date,r=Math.floor((a-t)/864e5);switch(x.dateRange){case"last7days":return r<=7;case"last30days":return r<=30;case"last90days":return r<=90;default:return!0}})(),n="all"===x.priceRange||(()=>{const t=e.purchaseRate;switch(x.priceRange){case"low":return t<=100;case"medium":return t>100&&t<=500;case"high":return t>500;default:return!0}})();return t&&a&&r&&n}).sort((e,t)=>{const a="asc"===x.sortOrder?1:-1;return"itemName"===x.sortBy?a*e.itemName.localeCompare(t.itemName):"expiryDate"===x.sortBy?a*(new Date(e.expiryDate)-new Date(t.expiryDate)):"purchaseRate"===x.sortBy?a*(e.purchaseRate-t.purchaseRate):a*(e[x.sortBy]-t[x.sortBy])}),[o,x]);return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 p-6"},n.a.createElement("div",{className:"max-w-7xl mx-auto space-y-8"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",{className:"text-4xl font-bold tracking-tight text-gray-900"},"\ud83d\udd0e Purchase Return Search"),n.a.createElement("p",{className:"text-lg text-gray-600 mt-2"},"View and manage purchase return data efficiently")),n.a.createElement("div",{className:"flex space-x-4 border-b border-gray-200"},n.a.createElement("button",{onClick:()=>g("search"),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200 ${"search"===u?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`},"Search"),n.a.createElement("button",{onClick:()=>g("results"),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200 ${"results"===u?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,disabled:0===o.length},"Results ",o.length>0&&`(${o.length})`)),n.a.createElement("div",{className:"mt-6"},"search"===u&&n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200"},n.a.createElement("form",{onSubmit:y,className:"space-y-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Email"),n.a.createElement("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Supplier Name"),n.a.createElement("input",{type:"text",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0}))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-300 shadow-md"},i?n.a.createElement("div",{className:"flex items-center space-x-2"},n.a.createElement("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),n.a.createElement("span",null,"Searching...")):"Search")))),"results"===u&&(()=>{if(0===o.length)return null;const e=f.reduce((e,t)=>({totalPurchaseValue:e.totalPurchaseValue+t.purchasedQuantity*t.purchaseRate,totalSaleValue:e.totalSaleValue+t.soldQuantity*t.mrp,totalPurchasedQty:e.totalPurchasedQty+t.purchasedQuantity,totalSoldQty:e.totalSoldQty+t.soldQuantity}),{totalPurchaseValue:0,totalSaleValue:0,totalPurchasedQty:0,totalSoldQty:0}),t=[{label:"Total Purchase Value",value:`\u20b9${e.totalPurchaseValue.toFixed(2)}`,icon:"\ud83d\udcb0",color:"blue"},{label:"Total Sale Value",value:`\u20b9${e.totalSaleValue.toFixed(2)}`,icon:"\ud83d\udcc8",color:"green"},{label:"Total Purchased Quantity",value:e.totalPurchasedQty,icon:"\ud83d\udce6",color:"purple"},{label:"Total Sold Quantity",value:e.totalSoldQty,icon:"\ud83d\udecd\ufe0f",color:"orange"}];return n.a.createElement("div",{className:"space-y-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},t.map((e,t)=>n.a.createElement("div",{key:t,className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 transform transition-all duration-300 hover:shadow-lg hover:scale-[1.02]"},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500 font-medium"},e.label),n.a.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},e.value)),n.a.createElement("span",{className:"text-3xl"},e.icon))))),n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 mb-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Search"),n.a.createElement("input",{type:"text",value:x.searchTerm,onChange:e=>b(t=>({...t,searchTerm:e.target.value})),placeholder:"Search items...",className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expiry Status"),n.a.createElement("select",{value:x.expiryStatus,onChange:e=>b(t=>({...t,expiryStatus:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"expired"},"Expired"),n.a.createElement("option",{value:"nearExpiry"},"Near Expiry"),n.a.createElement("option",{value:"good"},"Good"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Date Range"),n.a.createElement("select",{value:x.dateRange,onChange:e=>b(t=>({...t,dateRange:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All Time"),n.a.createElement("option",{value:"last7days"},"Last 7 Days"),n.a.createElement("option",{value:"last30days"},"Last 30 Days"),n.a.createElement("option",{value:"last90days"},"Last 90 Days"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Price Range"),n.a.createElement("select",{value:x.priceRange,onChange:e=>b(t=>({...t,priceRange:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All Prices"),n.a.createElement("option",{value:"low"},"Low (\u2264 \u20b9100)"),n.a.createElement("option",{value:"medium"},"Medium (\u20b9100-500)"),n.a.createElement("option",{value:"high"},"High (",">"," \u20b9500)"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Sort By"),n.a.createElement("select",{value:x.sortBy,onChange:e=>b(t=>({...t,sortBy:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"itemName"},"Item Name"),n.a.createElement("option",{value:"expiryDate"},"Expiry Date"),n.a.createElement("option",{value:"purchaseRate"},"Purchase Rate"),n.a.createElement("option",{value:"purchasedQuantity"},"Quantity"))))),n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200"},n.a.createElement("div",{className:"overflow-x-auto"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,["Item Name","Batch","Purchased Qty","Sold Qty","Avg Price","Total Purchase","Total Sale","Expiry Date"].map(e=>n.a.createElement("th",{key:e,className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},e)))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.map((e,t)=>n.a.createElement("tr",{key:t,className:"hover:bg-gray-50 transition-colors duration-200"},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.batch),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.purchasedQuantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.soldQuantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.avgPrice.toFixed(2)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.totalPurchaseValue.toFixed(2)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.totalSaleValue.toFixed(2)),n.a.createElement("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${"expired"===e.expiryStatus?"text-red-500":"nearExpiry"===e.expiryStatus?"text-yellow-600":"text-green-600"}`},new Date(e.expiryDate).toLocaleDateString()))))))))})()),m&&n.a.createElement("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg"},m)))};var H=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)({email:"",returnInvoiceNumber:"",date:(new Date).toISOString().split("T")[0],receiptNumber:"",customerName:"",items:[{itemName:"",batch:"",quantity:0,discount:0,amount:0,availableQuantity:0,purchaseRate:0,gstPercentage:0,gstAmount:0,returnableQuantity:0,availableBatches:[]}],totalAmount:0,totalDiscount:0,gstAmount:0,netAmount:0}),[l,o]=Object(r.useState)([]),[s,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(""),[x,b]=Object(r.useState)(!1),[y,h]=Object(r.useState)(!1);Object(r.useEffect)(()=>{(()=>{const t=localStorage.getItem("token"),r=localStorage.getItem("email");t&&r?(console.log("Token found:",t),console.log("Email loaded from localStorage:",r),a(e=>({...e,email:r}))):(console.warn("No token or email found in localStorage"),d("You must be logged in to access this page"),setTimeout(()=>{e("/login")},3e3))})()},[e]),Object(r.useEffect)(()=>{t.customerName&&t.email?h(!0):(h(!1),o([]))},[t.customerName,t.email]);const f=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},E=(e,r)=>{const{name:n,value:l}=r.target,o=[...t.items],s=o[e];if(["quantity","discount","gstPercentage"].includes(n)){const t=parseFloat(l)||0;if("quantity"===n){if(t>s.availableQuantity)return void d(`Cannot return ${t} units of ${s.itemName} (Batch: ${s.batch}). Maximum returnable quantity is ${s.availableQuantity}`);if(t<=0)return void d("Return quantity must be greater than 0")}o[e]={...s,[n]:t};const a=s.purchaseRate*o[e].quantity,r=a*o[e].discount/100,i=a-r,c=i*o[e].gstPercentage/100;o[e]={...o[e],totalAmount:a,discountAmount:r,amount:i,gstAmount:c,netAmount:i+c}}else o[e]={...s,[n]:l};a(e=>({...e,items:o})),N(o)},N=e=>{let t=0,r=0,n=0,l=0;e.forEach(e=>{const a=e.purchaseRate*e.quantity,o=a*e.discount/100,s=a-o,i=s*e.gstPercentage/100;t+=a,r+=o,n+=i,l+=s+i}),a(e=>({...e,totalAmount:t,totalDiscount:r,gstAmount:n,netAmount:l}))};return t.email?n.a.createElement("div",{className:"min-h-screen bg-slate-50"},n.a.createElement("div",{className:"max-w-7xl mx-auto px-4 py-10 sm:px-6 lg:px-8"},n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden"},n.a.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4"},n.a.createElement("h1",{className:"text-2xl font-bold text-white"},"Sale Return Form"),n.a.createElement("p",{className:"text-blue-100 text-sm mt-1"},"Process customer returns and refunds")),n.a.createElement("div",{className:"p-6"},m&&n.a.createElement("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-red-700"},m)))),u&&n.a.createElement("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-md"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-green-700"},u)))),n.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),d(""),g("");try{c(!0);const e=localStorage.getItem("token"),s=new Map;l.forEach(e=>{const t=`${e.itemName.toLowerCase()}-${e.batch}`;s.set(t,{quantity:parseInt(e.quantity)||0,itemName:e.itemName,batch:e.batch})});for(const a of t.items){const e=`${a.itemName.toLowerCase()}-${a.batch}`,t=s.get(e);if(!t)return d(`Item ${a.itemName} (Batch: ${a.batch}) was not sold to this customer`),void c(!1);if(a.quantity>t.quantity)return d(`Cannot return ${a.quantity} units of ${a.itemName} (Batch: ${a.batch}). Maximum returnable quantity is ${t.quantity}`),void c(!1)}const i=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/bills/return",t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(i.data){g("Sale return bill created successfully!");const e=l.map(e=>{const a=t.items.find(t=>t.itemName.toLowerCase()===e.itemName.toLowerCase()&&t.batch===e.batch);return a?{...e,quantity:e.quantity-a.quantity}:e});o(e),a(e=>({...e,returnInvoiceNumber:"",receiptNumber:"",items:[{itemName:"",batch:"",quantity:0,discount:0,amount:0,availableQuantity:0,purchaseRate:0,gstPercentage:0,gstAmount:0,returnableQuantity:0,availableBatches:[]}],totalAmount:0,totalDiscount:0,gstAmount:0,netAmount:0}))}else{var r;d("Error creating sale return bill: "+((null===(r=i.data)||void 0===r?void 0:r.message)||"Unknown error"))}c(!1)}catch(n){c(!1),n.response&&401===n.response.status?(d("Session expired. Please login again."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),window.location.href="/login"},3e3)):n.response&&n.response.data&&n.response.data.message?d(n.response.data.message):d("Error creating sale return bill: "+(n.message||"Check your network connection")),console.error("Submit error:",n)}},className:"space-y-8"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4"},n.a.createElement("div",{className:"space-y-2"},n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Email"),n.a.createElement("div",{className:"relative"},n.a.createElement("input",{type:"email",name:"email",value:t.email,className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",readOnly:!0}))),n.a.createElement("div",{className:"space-y-2"},n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Date"),n.a.createElement("input",{type:"date",name:"date",value:t.date,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})),n.a.createElement("div",{className:"space-y-2"},n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Return Invoice Number"),n.a.createElement("input",{type:"text",name:"returnInvoiceNumber",value:t.returnInvoiceNumber,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter return invoice no.",required:!0})),n.a.createElement("div",{className:"space-y-2"},n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Receipt Number"),n.a.createElement("input",{type:"text",name:"receiptNumber",value:t.receiptNumber,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter receipt no.",required:!0})),n.a.createElement("div",{className:"space-y-2"},n.a.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Customer Name"),n.a.createElement("div",{className:"relative"},n.a.createElement("input",{type:"text",name:"customerName",value:t.customerName,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer name",required:!0}))),y&&n.a.createElement("div",{className:"flex items-end"},n.a.createElement("button",{type:"button",onClick:async()=>{try{b(!0);const a=localStorage.getItem("token"),r=await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/bills/returnable-quantities",{params:{email:t.email,partyName:t.customerName},headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(r.data&&Array.isArray(r.data)){const e=r.data.map(e=>({itemName:e.itemName,batch:e.batch,quantity:e.returnableQuantity,soldQuantity:e.soldQuantity,returnedQuantity:e.returnedQuantity,mrp:e.mrp,purchaseRate:e.purchaseRate}));o(e),g("Medicines loaded successfully"),setTimeout(()=>g(""),3e3)}else d("No medicines found for this customer"),setTimeout(()=>d(""),3e3)}catch(e){console.error("Error fetching medicines:",e),e.response&&401===e.response.status?(d("Session expired. Please login again."),setTimeout(()=>{localStorage.removeItem("token"),localStorage.removeItem("email"),window.location.href="/login"},3e3)):(d("Failed to load medicines"),setTimeout(()=>d(""),3e3))}finally{b(!1)}},disabled:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400"},x?n.a.createElement(n.a.Fragment,null,n.a.createElement("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Loading..."):"Load Bill"))),n.a.createElement("div",{className:"space-y-4"},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Return Items"),n.a.createElement("button",{type:"button",onClick:()=>{a(e=>({...e,items:[...e.items,{itemName:"",batch:"",quantity:0,discount:0,amount:0,availableQuantity:0,purchaseRate:0,gstPercentage:0,gstAmount:0,returnableQuantity:0,availableBatches:[]}]}))},className:"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},n.a.createElement("svg",{className:"mr-1.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})),"Add Item")),n.a.createElement("div",{className:"overflow-x-auto bg-white border border-gray-200 rounded-lg shadow-sm"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Batch"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Available Qty"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Returnable Qty"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Purchase Rate"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Return Qty"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Discount %"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"GST %"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),n.a.createElement("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.items.map((e,r)=>n.a.createElement("tr",{key:r,className:"hover:bg-gray-50"},n.a.createElement("td",{className:"px-4 py-2"},n.a.createElement("input",{type:"text",name:"itemName",value:e.itemName,onChange:e=>((e,r)=>{const{value:n}=r.target,o=[...t.items];o[e]={...o[e],itemName:n,batch:"",availableBatches:[]};const s=l.filter(e=>e.itemName.toLowerCase()===n.toLowerCase());if(s.length>0&&(o[e]={...o[e],itemName:s[0].itemName,availableBatches:s.map(e=>({batch:e.batch,quantity:e.quantity,mrp:e.mrp,purchaseRate:e.purchaseRate}))},1===s.length)){const t=s[0];o[e]={...o[e],batch:t.batch,availableQuantity:t.quantity,returnableQuantity:t.quantity,purchaseRate:t.purchaseRate,amount:t.purchaseRate,quantity:1}}a(e=>({...e,items:o}))})(r,e),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter medicine name",required:!0})),n.a.createElement("td",{className:"px-4 py-2"},n.a.createElement("select",{name:"batch",value:e.batch,onChange:e=>((e,r)=>{const{value:n}=r.target,l=[...t.items],o=l[e],s=o.availableBatches.find(e=>e.batch===n);s&&(l[e]={...o,batch:s.batch,availableQuantity:s.quantity,returnableQuantity:s.quantity,purchaseRate:s.purchaseRate,amount:s.purchaseRate,quantity:1}),a(e=>({...e,items:l}))})(r,e),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0},n.a.createElement("option",{value:""},"Select Batch"),e.availableBatches&&e.availableBatches.map((e,t)=>n.a.createElement("option",{key:t,value:e.batch},e.batch," (Available: ",e.quantity,")")))),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("input",{type:"number",name:"availableQuantity",value:e.availableQuantity,readOnly:!0,className:"w-20 px-2 py-1 text-sm text-center bg-gray-50 border border-gray-300 rounded-md"})),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("input",{type:"number",name:"returnableQuantity",value:e.returnableQuantity,readOnly:!0,className:"w-20 px-2 py-1 text-sm text-center bg-gray-50 border border-gray-300 rounded-md"})),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("span",{className:"text-gray-500 mr-1"},"\u20b9"),n.a.createElement("input",{type:"number",name:"purchaseRate",value:e.purchaseRate,onChange:e=>E(r,e),step:"0.01",min:"0",className:"w-24 px-2 py-1 text-sm text-center border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0}))),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("input",{type:"number",name:"quantity",value:e.quantity,onChange:e=>E(r,e),min:"1",max:e.returnableQuantity,className:"w-20 px-2 py-1 text-sm text-center border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("input",{type:"number",name:"discount",value:e.discount,onChange:e=>E(r,e),step:"0.01",min:"0",max:"100",className:"w-16 px-2 py-1 text-sm text-center border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),n.a.createElement("span",{className:"text-gray-500 ml-1"},"%"))),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("input",{type:"number",name:"gstPercentage",value:e.gstPercentage,onChange:e=>E(r,e),step:"0.01",min:"0",max:"100",className:"w-16 px-2 py-1 text-sm text-center border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),n.a.createElement("span",{className:"text-gray-500 ml-1"},"%"))),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("span",{className:"text-gray-500 mr-1"},"\u20b9"),n.a.createElement("input",{type:"number",name:"amount",value:e.amount,readOnly:!0,className:"w-24 px-2 py-1 text-sm text-center bg-gray-50 border border-gray-300 rounded-md"}))),n.a.createElement("td",{className:"px-4 py-2 text-center"},n.a.createElement("button",{type:"button",onClick:()=>(e=>{const r=[...t.items];r.splice(e,1),a(e=>({...e,items:r})),N(r)})(r),className:"text-sm font-medium text-red-600 hover:text-red-800 disabled:text-gray-400",disabled:1===t.items.length},n.a.createElement("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})))))))))),n.a.createElement("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 shadow-sm"},n.a.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Bill Summary"),n.a.createElement("div",{className:"max-w-md"},n.a.createElement("div",{className:"grid grid-cols-2 gap-4"},n.a.createElement("div",{className:"text-sm text-gray-700"},"Total Amount:"),n.a.createElement("div",{className:"text-sm font-medium text-right"},"\u20b9",t.totalAmount.toFixed(2)),n.a.createElement("div",{className:"text-sm text-gray-700"},"Total Discount:"),n.a.createElement("div",{className:"text-sm font-medium text-right text-red-600"},"- \u20b9",t.totalDiscount.toFixed(2)),n.a.createElement("div",{className:"text-sm text-gray-700"},"GST (18%):"),n.a.createElement("div",{className:"text-sm font-medium text-right"},"\u20b9",t.gstAmount.toFixed(2)),n.a.createElement("div",{className:"pt-2 border-t border-gray-200 text-base font-medium text-gray-900"},"Net Refund Amount:"),n.a.createElement("div",{className:"pt-2 border-t border-gray-200 text-base font-bold text-right text-blue-700"},"\u20b9",t.netAmount.toFixed(2))))),n.a.createElement("div",{className:"flex justify-end pt-2"},n.a.createElement("button",{type:"button",onClick:()=>{a({...t,returnInvoiceNumber:"",receiptNumber:"",items:[{itemName:"",batch:"",quantity:0,discount:0,amount:0,availableQuantity:0,purchaseRate:0,gstPercentage:0,gstAmount:0,returnableQuantity:0,availableBatches:[]}],totalAmount:0,totalDiscount:0,gstAmount:0,netAmount:0}),d(""),g("")},className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Reset Form"),n.a.createElement("button",{type:"button",onClick:()=>{const e=new B.b;e.setFillColor(41,128,185),e.rect(0,0,210,40,"F"),e.setTextColor(255,255,255),e.setFontSize(20),e.text("Sale Return Bill",105,20,{align:"center"}),e.setTextColor(0,0,0),e.setFontSize(12),e.text(`Return Invoice Number: ${t.returnInvoiceNumber}`,20,50),e.text(`Date: ${t.date}`,20,60),e.text(`Customer Name: ${t.customerName}`,20,70),e.text(`Receipt Number: ${t.receiptNumber}`,20,80);const a=t.items.map(e=>[e.itemName,e.batch,e.quantity,`\u20b9${e.purchaseRate}`,`${e.discount}%`,`${e.gstPercentage}%`,`\u20b9${e.amount}`]);e.autoTable({head:[["Item Name","Batch","Quantity","Purchase Rate","Discount %","GST %","Amount"]],body:a,startY:90,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:12,fontStyle:"bold"},bodyStyles:{fontSize:10},alternateRowStyles:{fillColor:[240,240,240]}});const r=e.lastAutoTable.finalY+20;e.setFontSize(12),e.text("Bill Summary",20,r),e.setFontSize(10),e.text(`Total Amount: \u20b9${t.totalAmount.toFixed(2)}`,20,r+10),e.text(`Total Discount: \u20b9${t.totalDiscount.toFixed(2)}`,20,r+20),e.text(`GST Amount: \u20b9${t.gstAmount.toFixed(2)}`,20,r+30),e.setFontSize(12),e.setFont(void 0,"bold"),e.text(`Net Amount: \u20b9${t.netAmount.toFixed(2)}`,20,r+45),e.setFontSize(8),e.setTextColor(100,100,100),e.text("This is a computer-generated document. No signature required.",105,280,{align:"center"}),e.save(`SaleReturn_${t.returnInvoiceNumber}.pdf`)},className:"mr-3 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},n.a.createElement("svg",{className:"inline-block w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})),"Print PDF"),n.a.createElement("button",{type:"submit",className:"ml-3 inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:s||!t.email},s?n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):"Create Sale Return Bill"))))))):n.a.createElement("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center"},n.a.createElement("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full"},n.a.createElement("div",{className:"text-center"},n.a.createElement("svg",{className:"mx-auto h-12 w-12 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})),n.a.createElement("h3",{className:"mt-2 text-lg font-medium text-gray-900"},"Authentication Required"),n.a.createElement("p",{className:"mt-1 text-sm text-gray-500"},m||"You must be logged in to access this page. Redirecting to login..."),n.a.createElement("div",{className:"mt-6"},n.a.createElement("button",{type:"button",onClick:()=>e("/login"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Go to Login")))))},W=a(19);var Y=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)(!1),l=t=>{a(!0);try{"client"===t.toLowerCase()?e("/expiry-bill/client"):"supplier"===t.toLowerCase()?e("/expiry-bill/supplier"):e(`/expiry/${t.toLowerCase()}`)}catch(r){W.toast.error("Something went wrong")}finally{a(!1)}};return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6"},n.a.createElement("div",{className:"max-w-6xl mx-auto space-y-12"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",{className:"text-5xl font-bold text-blue-600 mb-4"},"Expiry Bill Management"),n.a.createElement("p",{className:"text-xl text-gray-600 mb-4"},"Efficiently manage expired items through client or supplier returns."),n.a.createElement("p",{className:"text-lg text-gray-500 max-w-3xl mx-auto"},"Our system helps you track and process expired medicines, ensuring proper documentation and maintaining compliance with regulatory requirements. Choose the appropriate return type below to proceed.")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.a.createElement("div",{onClick:()=>l("client"),className:"cursor-pointer transform hover:scale-105 transition-all duration-300"},n.a.createElement("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-3xl p-1"},n.a.createElement("div",{className:"bg-white rounded-3xl p-6 h-full"},n.a.createElement("div",{className:"flex items-start space-x-4"},n.a.createElement("div",{className:"bg-orange-100 rounded-2xl p-4"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),n.a.createElement("div",{className:"flex-1"},n.a.createElement("h2",{className:"text-2xl font-bold text-gray-800"},"Client Expiry Return"),n.a.createElement("p",{className:"text-gray-600 mt-1"},"Process expired items returned by clients"),n.a.createElement("ul",{className:"mt-4 space-y-2 text-sm text-gray-500"},n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Record client details and return date"),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Generate client return receipt"),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Update inventory automatically"))))))),n.a.createElement("div",{onClick:()=>l("supplier"),className:"cursor-pointer transform hover:scale-105 transition-all duration-300"},n.a.createElement("div",{className:"bg-gradient-to-br from-emerald-500 to-green-500 rounded-3xl p-1"},n.a.createElement("div",{className:"bg-white rounded-3xl p-6 h-full"},n.a.createElement("div",{className:"flex items-start space-x-4"},n.a.createElement("div",{className:"bg-emerald-100 rounded-2xl p-4"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"}))),n.a.createElement("div",{className:"flex-1"},n.a.createElement("h2",{className:"text-2xl font-bold text-gray-800"},"Supplier Expiry Return"),n.a.createElement("p",{className:"text-gray-600 mt-1"},"Return expired items to suppliers"),n.a.createElement("ul",{className:"mt-4 space-y-2 text-sm text-gray-500"},n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Track supplier return policies"),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Generate return documentation"),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-4 h-4 mr-2 text-emerald-500",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),"Manage credit notes and refunds")))))))),n.a.createElement("div",{className:"bg-white rounded-3xl p-8 shadow-xl bg-opacity-60 backdrop-blur-lg"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h2",{className:"text-3xl font-bold text-gray-800 mb-4"},"Need Assistance?"),n.a.createElement("p",{className:"text-gray-600 text-lg mb-8"},"Our support team is available to guide you through any expiry return process."),n.a.createElement("div",{className:"flex justify-center space-x-4"},n.a.createElement("button",{className:"px-8 py-3 bg-blue-600 text-white font-semibold rounded-full hover:bg-blue-700 transition-colors",onClick:()=>window.location.href="/support"},"Contact Support"),n.a.createElement("button",{className:"px-8 py-3 border-2 border-blue-600 text-blue-600 font-semibold rounded-full hover:bg-blue-50 transition-colors",onClick:()=>window.location.href="/docs"},"View Documentation"))))),t&&n.a.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.a.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white"})))};var X=()=>n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-8 font-sans"},n.a.createElement("div",{className:"max-w-6xl mx-auto space-y-12"},n.a.createElement("div",{className:"text-center space-y-6"},n.a.createElement("div",{className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-2xl shadow-lg"},n.a.createElement("h1",{className:"text-4xl font-bold"},"\ud83d\udcd1 Bill Generation Helper Guide"),n.a.createElement("p",{className:"mt-2 opacity-90"},"Version 2.1.0 | Updated: August 2025"))),n.a.createElement("section",{className:"bg-white p-8 rounded-xl shadow-sm"},n.a.createElement("h2",{className:"text-3xl font-bold text-blue-600 mb-6"},"\ud83c\udfc1 Getting Started"),n.a.createElement("div",{className:"space-y-6"},n.a.createElement("div",{className:"bg-blue-50 p-6 rounded-lg"},n.a.createElement("h3",{className:"text-xl font-semibold mb-4"},"System Requirements"),n.a.createElement("ul",{className:"space-y-3"},n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})),"Modern web browser (Chrome/Firefox/Safari)"),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})),"Active internet connection"))))),n.a.createElement("section",{className:"bg-white p-8 rounded-xl shadow-sm"},n.a.createElement("h2",{className:"text-3xl font-bold text-blue-600 mb-6"},"\ud83e\udded Quick Start Flow"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},["1. Access Bill Console","2. Enter Party Details","3. Add Items","4. Generate Bill"].map((e,t)=>n.a.createElement("div",{key:t,className:"bg-gray-50 p-4 rounded-lg border border-blue-200 text-center"},n.a.createElement("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full mb-2 mx-auto flex items-center justify-center"},t+1),n.a.createElement("p",{className:"font-medium"},e))))),n.a.createElement("section",{className:"bg-white p-8 rounded-xl shadow-sm"},n.a.createElement("h2",{className:"text-3xl font-bold text-blue-600 mb-6"},"\ud83d\udccb Step-by-Step Instructions"),n.a.createElement("div",{className:"space-y-8"},n.a.createElement("div",{className:"bg-gray-50 p-6 rounded-lg"},n.a.createElement("h3",{className:"text-xl font-semibold mb-4"},"1. Party Information"),n.a.createElement("div",{className:"bg-white p-4 rounded border border-dashed border-gray-300 mb-4"},"[Customer Details Form Preview]"),n.a.createElement("div",{className:"grid grid-cols-2 gap-4"},n.a.createElement("div",{className:"bg-red-50 p-4 rounded"},n.a.createElement("h4",{className:"font-medium text-red-600"},"\u26a0\ufe0f Mandatory Fields"),n.a.createElement("ul",{className:"list-disc pl-4 mt-2"},n.a.createElement("li",null,"GSTIN (15-digit format)"),n.a.createElement("li",null,"Shipping Address"),n.a.createElement("li",null,"Contact Number"))),n.a.createElement("div",{className:"bg-green-50 p-4 rounded"},n.a.createElement("h4",{className:"font-medium text-green-600"},"\ud83d\udca1 Pro Tip"),n.a.createElement("p",null,"Use the \ud83d\udd0d search icon to find existing customers")))))),n.a.createElement("section",{className:"bg-white p-8 rounded-xl shadow-sm"},n.a.createElement("h3",{className:"text-2xl font-semibold mb-4"},"\ud83d\udcb8 Tax Configuration"),n.a.createElement("table",{className:"w-full border-collapse"},n.a.createElement("thead",null,n.a.createElement("tr",{className:"bg-blue-50"},n.a.createElement("th",{className:"p-3 text-left"},"Type"),n.a.createElement("th",{className:"p-3 text-left"},"Rate"),n.a.createElement("th",{className:"p-3 text-left"},"Code"))),n.a.createElement("tbody",null,[{type:"GST",rate:"18%",code:"G18"},{type:"IGST",rate:"12%",code:"IG12"},{type:"Discount",rate:"5%",code:"DISC05"}].map((e,t)=>n.a.createElement("tr",{key:t,className:"border-b"},n.a.createElement("td",{className:"p-3"},e.type),n.a.createElement("td",{className:"p-3"},e.rate),n.a.createElement("td",{className:"p-3 font-mono"},e.code)))))),n.a.createElement("section",{className:"bg-yellow-50 p-8 rounded-xl shadow-sm"},n.a.createElement("h2",{className:"text-3xl font-bold text-blue-600 mb-6"},"\ud83c\udd98 Support Channels"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},[{method:"Chat Support",availability:"24/7",response:"<5 mins"},{method:"Email",availability:"Business Hours",response:"4-8 hrs"},{method:"Phone",availability:"10AM-7PM IST",response:"Immediate"}].map((e,t)=>n.a.createElement("div",{key:t,className:"bg-white p-6 rounded-lg shadow-sm"},n.a.createElement("h3",{className:"text-xl font-semibold mb-2"},e.method),n.a.createElement("p",{className:"text-sm"},"\u23f3 ",e.availability),n.a.createElement("p",{className:"text-sm"},"\u23f1\ufe0f ",e.response," response"))))),n.a.createElement("div",{className:"text-center space-y-4"},n.a.createElement("div",{className:"flex justify-center gap-4"},n.a.createElement("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors"},"Download PDF"),n.a.createElement("button",{className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors"},"Watch Video")),n.a.createElement("p",{className:"text-gray-600"},"Emergency Contact: helpdesk@pharmabill.com | +91 63713 87040"))));var J=()=>{const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)(""),[o,s]=Object(r.useState)([]),[i,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)("search"),[x,b]=Object(r.useState)({searchTerm:"",expiryStatus:"all",sortBy:"itemName",sortOrder:"asc",dateRange:"all",priceRange:"all"}),y=async t=>{t.preventDefault(),c(!0),d("");try{const t=(await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/purchase-returns/returnable-quantities",{params:{email:e,supplierName:a}})).data.map(e=>({...e,totalPurchaseValue:e.purchasedQuantity*e.purchaseRate,totalSaleValue:e.soldQuantity*e.mrp,avgPrice:e.purchaseRate,expiryStatus:h(e.expiryDate)}));s(t),g("results")}catch(l){var r,n;d((null===(r=l.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Error fetching data")}finally{c(!1)}},h=e=>{const t=new Date,a=(new Date(e)-t)/2592e6;return a<0?"expired":a<3?"nearExpiry":"good"},f=Object(r.useMemo)(()=>o.filter(e=>{const t=e.itemName.toLowerCase().includes(x.searchTerm.toLowerCase())||e.batch.toLowerCase().includes(x.searchTerm.toLowerCase()),a="all"===x.expiryStatus||e.expiryStatus===x.expiryStatus,r="all"===x.dateRange||(()=>{const t=new Date(e.purchaseDate),a=new Date,r=Math.floor((a-t)/864e5);switch(x.dateRange){case"last7days":return r<=7;case"last30days":return r<=30;case"last90days":return r<=90;default:return!0}})(),n="all"===x.priceRange||(()=>{const t=e.purchaseRate;switch(x.priceRange){case"low":return t<=100;case"medium":return t>100&&t<=500;case"high":return t>500;default:return!0}})();return t&&a&&r&&n}).sort((e,t)=>{const a="asc"===x.sortOrder?1:-1;return"itemName"===x.sortBy?a*e.itemName.localeCompare(t.itemName):"expiryDate"===x.sortBy?a*(new Date(e.expiryDate)-new Date(t.expiryDate)):"purchaseRate"===x.sortBy?a*(e.purchaseRate-t.purchaseRate):a*(e[x.sortBy]-t[x.sortBy])}),[o,x]);return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 p-6"},n.a.createElement("div",{className:"max-w-7xl mx-auto space-y-8"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",{className:"text-4xl font-bold tracking-tight text-gray-900"},"\ud83d\udd0e Purchase Return Search"),n.a.createElement("p",{className:"text-lg text-gray-600 mt-2"},"View and manage purchase return data efficiently")),n.a.createElement("div",{className:"flex space-x-4 border-b border-gray-200"},n.a.createElement("button",{onClick:()=>g("search"),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200 ${"search"===u?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`},"Search"),n.a.createElement("button",{onClick:()=>g("results"),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200 ${"results"===u?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,disabled:0===o.length},"Results ",o.length>0&&`(${o.length})`)),n.a.createElement("div",{className:"mt-6"},"search"===u&&n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200"},n.a.createElement("form",{onSubmit:y,className:"space-y-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Email"),n.a.createElement("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Supplier Name"),n.a.createElement("input",{type:"text",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",required:!0}))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 transition-all duration-300 shadow-md"},i?n.a.createElement("div",{className:"flex items-center space-x-2"},n.a.createElement("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),n.a.createElement("span",null,"Searching...")):"Search")))),"results"===u&&(()=>{if(0===o.length)return null;const e=f.reduce((e,t)=>({totalPurchaseValue:e.totalPurchaseValue+t.purchasedQuantity*t.purchaseRate,totalSaleValue:e.totalSaleValue+t.soldQuantity*t.mrp,totalPurchasedQty:e.totalPurchasedQty+t.purchasedQuantity,totalSoldQty:e.totalSoldQty+t.soldQuantity}),{totalPurchaseValue:0,totalSaleValue:0,totalPurchasedQty:0,totalSoldQty:0}),t=[{label:"Total Purchase Value",value:`\u20b9${e.totalPurchaseValue.toFixed(2)}`,icon:"\ud83d\udcb0",color:"blue"},{label:"Total Sale Value",value:`\u20b9${e.totalSaleValue.toFixed(2)}`,icon:"\ud83d\udcc8",color:"green"},{label:"Total Purchased Quantity",value:e.totalPurchasedQty,icon:"\ud83d\udce6",color:"purple"},{label:"Total Sold Quantity",value:e.totalSoldQty,icon:"\ud83d\udecd\ufe0f",color:"orange"}];return n.a.createElement("div",{className:"space-y-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},t.map((e,t)=>n.a.createElement("div",{key:t,className:"bg-white rounded-xl shadow-md p-6 border border-gray-200 transform transition-all duration-300 hover:shadow-lg hover:scale-[1.02]"},n.a.createElement("div",{className:"flex items-center justify-between"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500 font-medium"},e.label),n.a.createElement("p",{className:"text-2xl font-bold text-gray-900 mt-1"},e.value)),n.a.createElement("span",{className:"text-3xl"},e.icon))))),n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200 mb-6"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Search"),n.a.createElement("input",{type:"text",value:x.searchTerm,onChange:e=>b(t=>({...t,searchTerm:e.target.value})),placeholder:"Search items...",className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expiry Status"),n.a.createElement("select",{value:x.expiryStatus,onChange:e=>b(t=>({...t,expiryStatus:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"expired"},"Expired"),n.a.createElement("option",{value:"nearExpiry"},"Near Expiry"),n.a.createElement("option",{value:"good"},"Good"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Date Range"),n.a.createElement("select",{value:x.dateRange,onChange:e=>b(t=>({...t,dateRange:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All Time"),n.a.createElement("option",{value:"last7days"},"Last 7 Days"),n.a.createElement("option",{value:"last30days"},"Last 30 Days"),n.a.createElement("option",{value:"last90days"},"Last 90 Days"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Price Range"),n.a.createElement("select",{value:x.priceRange,onChange:e=>b(t=>({...t,priceRange:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"all"},"All Prices"),n.a.createElement("option",{value:"low"},"Low (\u2264 \u20b9100)"),n.a.createElement("option",{value:"medium"},"Medium (\u20b9100-500)"),n.a.createElement("option",{value:"high"},"High (",">"," \u20b9500)"))),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Sort By"),n.a.createElement("select",{value:x.sortBy,onChange:e=>b(t=>({...t,sortBy:e.target.value})),className:"w-full px-4 py-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300"},n.a.createElement("option",{value:"itemName"},"Item Name"),n.a.createElement("option",{value:"expiryDate"},"Expiry Date"),n.a.createElement("option",{value:"purchaseRate"},"Purchase Rate"),n.a.createElement("option",{value:"purchasedQuantity"},"Quantity"))))),n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200"},n.a.createElement("div",{className:"overflow-x-auto"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,["Item Name","Batch","Purchased Qty","Sold Qty","Avg Price","Total Purchase","Total Sale","Expiry Date"].map(e=>n.a.createElement("th",{key:e,className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},e)))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.map((e,t)=>n.a.createElement("tr",{key:t,className:"hover:bg-gray-50 transition-colors duration-200"},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.batch),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.purchasedQuantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.soldQuantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.avgPrice.toFixed(2)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.totalPurchaseValue.toFixed(2)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.totalSaleValue.toFixed(2)),n.a.createElement("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${"expired"===e.expiryStatus?"text-red-500":"nearExpiry"===e.expiryStatus?"text-yellow-600":"text-green-600"}`},new Date(e.expiryDate).toLocaleDateString()))))))))})()),m&&n.a.createElement("div",{className:"fixed bottom-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg"},m)))};var Z=()=>{const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)([]),[o,s]=Object(r.useState)(!1),[c,m]=Object(r.useState)(""),d=Object(i.p)();Object(r.useEffect)(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("email");e&&t||d("/login")},[d]);return n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-6"},n.a.createElement("div",{className:"max-w-6xl mx-auto bg-white rounded-2xl shadow-xl p-8"},n.a.createElement("div",{className:"mb-8 text-center"},n.a.createElement("h2",{className:"text-3xl font-bold text-indigo-600 mb-2"},"Search Customer Invoices"),n.a.createElement("div",{className:"h-1 w-20 bg-indigo-500 mx-auto rounded-full"}),n.a.createElement("p",{className:"mt-4 text-gray-600"},"Enter the customer's name to view their purchase history and invoices. This is the same name you used when creating sale bills or return bills.")),n.a.createElement("div",{className:"mb-8"},n.a.createElement("div",{className:"flex gap-4"},n.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter customer name",className:"flex-1 rounded-lg border-2 border-indigo-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 p-3 transition-colors"}),n.a.createElement("button",{onClick:async()=>{try{s(!0),m("");const a=localStorage.getItem("token"),r=localStorage.getItem("email");if(!a||!r)return m("Please login first"),void d("/login");const n=await fetch(`https://medicine-inventory-management-backend.onrender.com/api/bills/party-invoices/${encodeURIComponent(e)}`,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),o=await n.json();if(!n.ok)throw new Error(o.message||"Failed to fetch invoices");l(o.invoices)}catch(t){m(t.message),l([])}finally{s(!1)}},disabled:o||!e.trim(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition-colors disabled:bg-gray-400"},o?"Searching...":"Search"))),c&&n.a.createElement("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg"},c),a.length>0&&n.a.createElement("div",{className:"rounded-xl border-2 border-indigo-50 overflow-hidden"},n.a.createElement("table",{className:"w-full"},n.a.createElement("thead",{className:"bg-indigo-600 text-white"},n.a.createElement("tr",null,n.a.createElement("th",{className:"px-4 py-3 text-left"},"Invoice Number"),n.a.createElement("th",{className:"px-4 py-3 text-left"},"Date"),n.a.createElement("th",{className:"px-4 py-3 text-left"},"Items"),n.a.createElement("th",{className:"px-4 py-3 text-right"},"Total Amount"))),n.a.createElement("tbody",{className:"divide-y divide-indigo-50"},a.map(e=>n.a.createElement("tr",{key:e._id,className:"hover:bg-indigo-50"},n.a.createElement("td",{className:"px-4 py-3"},e.saleInvoiceNumber),n.a.createElement("td",{className:"px-4 py-3"},new Date(e.date).toLocaleDateString()),n.a.createElement("td",{className:"px-4 py-3"},n.a.createElement("ul",{className:"list-disc list-inside"},e.items.map((e,t)=>n.a.createElement("li",{key:t},e.itemName," - ",e.quantity," x \u20b9",e.mrp)))),n.a.createElement("td",{className:"px-4 py-3 text-right"},"\u20b9",e.totalAmount)))))),!o&&0===a.length&&!c&&n.a.createElement("div",{className:"text-center text-gray-500"},"No invoices found for this customer. Make sure you're using the exact name as entered in the sale bill.")))};var K=function(){const e=Object(i.p)(),[t,a]=Object(r.useState)(null),[l,o]=Object(r.useState)(!1),[s,c]=Object(r.useState)(null),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)([]),[x,b]=Object(r.useState)([]),[y,h]=Object(r.useState)(!1),[f,E]=Object(r.useState)(""),[N,v]=Object(r.useState)(""),[w,S]=Object(r.useState)(""),[k,C]=Object(r.useState)([]),D=Object(r.useRef)(null),R=Object(r.useRef)(null),A=Object(r.useCallback)(async t=>{try{o(!0),c(null);const u=localStorage.getItem("token");console.log("Fetching sales data with params:",t),console.log("Token present:",!!u);const g=await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/bills/medicine-sales",{params:t,headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});if(console.log("API Response:",g.data),g.data&&g.data.salesDetails){const e=[...new Set(g.data.salesDetails.map(e=>e.partyName))];C(e),a(g.data),c(null)}else console.log("No sales data in response:",g.data),c("No sales records found for the selected criteria"),a(null)}catch(d){var r,n,l,s;if(console.error("Error details:",{message:d.message,response:null===(r=d.response)||void 0===r?void 0:r.data,status:null===(n=d.response)||void 0===n?void 0:n.status}),401===(null===(l=d.response)||void 0===l?void 0:l.status))c("Please log in to view sales data"),e("/login");else if(404===(null===(s=d.response)||void 0===s?void 0:s.status))c("No sales records found for the selected criteria");else{var i,m;c((null===(i=d.response)||void 0===i?void 0:null===(m=i.data)||void 0===m?void 0:m.message)||"Failed to fetch sales data. Please try again.")}a(null)}finally{o(!1)}},[e]),I=e=>{const t=e.target.value;d(t),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{if(t.length>0){const e=u.filter(e=>e.toLowerCase().includes(t.toLowerCase()));b(e),h(!0)}else b([]),h(!1)},300)},j=()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("email");if(!e||!t)return null;const a=e=>e?new Date(e).toISOString().split("T")[0]:"",r={email:t,startDate:a(N)||a(new Date((new Date).setFullYear((new Date).getFullYear()-1))),endDate:a(w)||a(new Date)};return m.trim()&&(r.medicineName=m.trim()),f&&""!==f.trim()&&(r.partyName=f.trim()),r},P=()=>{if(!m.trim())return void c("Please enter a medicine name");const e=j();e&&A(e)},T=()=>{const e=j();e&&(e.medicineName?A(e):c("Please enter a medicine name"))},F=e=>{d(e),h(!1),R.current&&R.current.focus()},O=()=>{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{h(!1)},200)},L=()=>{if(D.current&&clearTimeout(D.current),m.length>0){const e=u.filter(e=>e.toLowerCase().includes(m.toLowerCase()));b(e),h(!0)}},$=()=>{d(""),E(""),v(""),S(""),a(null),c(null)},Q=()=>{if(!t||!t.salesDetails||0===t.salesDetails.length)return void c("No data available to download");const e=new B.b;e.setProperties({title:`Medicine Sales Report - ${m}`,subject:"Medicine Sales Summary",author:"Pharmacy Management System",creator:"Pharmacy App"}),e.setFontSize(20),e.setTextColor(44,62,80),e.text("Medicine Sales Summary",105,15,{align:"center"}),e.setFontSize(14),e.text(`Medicine: ${m}`,14,25);const a=`Date Range: ${N||"All time"} to ${w||"Present"}`;e.text(a,14,32),f&&e.text(`Party: ${f}`,14,39),e.setFillColor(52,152,219),e.rect(14,45,182,25,"F"),e.setTextColor(255,255,255),e.setFontSize(12),e.text("Sales Summary",105,52,{align:"center"});const r=t.salesDetails.reduce((e,t)=>e+(t.mrp*t.quantity-t.discount),0).toFixed(2),n=t.salesDetails.reduce((e,t)=>e+t.quantity,0),l=(r/n).toFixed(2);e.text(`Total Sales: \u20b9${r}`,24,62),e.text(`Total Quantity: ${n} units`,85,62),e.text(`Avg. Price: \u20b9${l}`,150,62);const o=[];t.salesDetails.forEach(e=>{const t=new Date(e.date).toLocaleDateString(),a=(e.mrp*e.quantity-e.discount).toFixed(2),r=[e.saleInvoiceNumber,t,e.partyName,e.quantity,e.mrp,e.discount,a];o.push(r)}),e.autoTable({head:[["Invoice #","Date","Party","Qty","MRP(\u20b9)","Discount(\u20b9)","Total(\u20b9)"]],body:o,startY:75,theme:"grid",styles:{fontSize:10,cellPadding:3,lineColor:[189,195,199]},headStyles:{fillColor:[41,128,185],textColor:[255,255,255],fontSize:11,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,240]}});const s=e.internal.getNumberOfPages();for(let t=1;t<=s;t++)e.setPage(t),e.setFontSize(10),e.setTextColor(128,128,128),e.text(`Generated on: ${(new Date).toLocaleString()} - Page ${t} of ${s}`,105,e.internal.pageSize.height-10,{align:"center"});e.save(`Medicine_Sales_Report_${m.replace(/\s+/g,"_")}.pdf`)};return Object(r.useEffect)(()=>()=>{D.current&&clearTimeout(D.current)},[]),Object(r.useEffect)(()=>{const t=localStorage.getItem("token"),a=localStorage.getItem("email");t&&a?(async()=>{try{const r=(await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/inventory",{params:{email:a},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.map(e=>e.itemName);g([...new Set(r)])}catch(e){console.error("Error fetching available medicines:",e)}})():e("/login")},[e]),l?n.a.createElement("div",{className:"min-h-screen bg-gray-100 flex justify-center items-center"},n.a.createElement("div",{className:"bg-white p-8 rounded-lg shadow-lg flex flex-col items-center"},n.a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mb-4"}),n.a.createElement("div",{className:"text-xl text-gray-700"},"Loading sales data..."))):s&&!t?n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 p-8"},n.a.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md p-8"},n.a.createElement("h1",{className:"text-2xl font-bold text-indigo-800 mb-6 border-b pb-4"},"Medicine Sales Summary"),n.a.createElement("div",{className:"text-center py-8"},n.a.createElement("div",{className:"mb-4"},n.a.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 20a8 8 0 100-16 8 8 0 000 16z"}))),n.a.createElement("div",{className:"text-gray-600 text-lg mb-4"},s),n.a.createElement("div",{className:"flex justify-center space-x-4"},n.a.createElement("button",{onClick:$,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-200"},"Reset Filters"),n.a.createElement("button",{onClick:()=>e("/dashboard"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-200"},"Back to Dashboard"))),n.a.createElement("div",{className:"mt-8"},n.a.createElement("label",{htmlFor:"medicineName",className:"block text-sm font-medium text-gray-700 mb-2"},"Try searching for a different medicine"),n.a.createElement("div",{className:"flex space-x-2"},n.a.createElement("div",{className:"relative flex-grow"},n.a.createElement("input",{ref:R,id:"medicineName",type:"text",value:m,onChange:I,onBlur:O,onFocus:L,placeholder:"e.g., Paracetamol, Amoxicillin",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200",autoComplete:"off"}),y&&x.length>0&&n.a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",onMouseDown:e=>e.preventDefault()},x.map((e,t)=>n.a.createElement("div",{key:t,onClick:()=>F(e),className:"px-4 py-2 hover:bg-indigo-50 cursor-pointer transition duration-150"},e)))),n.a.createElement("button",{onClick:P,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg hover:from-indigo-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-200 shadow-md"},"Search"))))):t?n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 p-8"},n.a.createElement("div",{className:"max-w-6xl mx-auto"},n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8"},n.a.createElement("div",{className:"flex justify-between items-center mb-6"},n.a.createElement("h1",{className:"text-2xl font-bold text-indigo-800"},"Medicine Sales Summary"),n.a.createElement("button",{onClick:Q,className:"px-5 py-2 bg-gradient-to-r from-rose-500 to-pink-500 text-white rounded-lg hover:from-rose-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 transition duration-200 shadow-md flex items-center space-x-2"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.a.createElement("span",null,"Download PDF"))),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5 mb-8"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"medicineName",className:"block text-sm font-medium text-gray-700 mb-2"},"Medicine Name"),n.a.createElement("div",{className:"flex space-x-2"},n.a.createElement("div",{className:"relative flex-grow"},n.a.createElement("input",{ref:R,id:"medicineName",type:"text",value:m,onChange:I,onBlur:O,onFocus:L,placeholder:"Enter medicine name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200",autoComplete:"off"}),y&&x.length>0&&n.a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",onMouseDown:e=>e.preventDefault()},x.map((e,t)=>n.a.createElement("div",{key:t,onClick:()=>F(e),className:"px-4 py-2 hover:bg-indigo-50 cursor-pointer transition duration-150"},e)))),n.a.createElement("button",{onClick:P,className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg hover:from-indigo-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-200"},"Search"))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"partyName",className:"block text-sm font-medium text-gray-700 mb-2"},"Party Name"),n.a.createElement("select",{id:"partyName",value:f,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"},n.a.createElement("option",{value:""},"All Parties"),k.map((e,t)=>n.a.createElement("option",{key:t,value:e},e)))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2"},"Start Date"),n.a.createElement("input",{id:"startDate",type:"date",value:N,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2"},"End Date"),n.a.createElement("input",{id:"endDate",type:"date",value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"}))),n.a.createElement("div",{className:"flex justify-end space-x-3 mb-8"},n.a.createElement("button",{onClick:$,className:"px-5 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-200 shadow-sm"},"Reset Filters"),n.a.createElement("button",{onClick:T,className:"px-5 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-200 shadow-md"},"Apply Filters")),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},n.a.createElement("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg p-6 text-white"},n.a.createElement("div",{className:"text-sm font-medium mb-2 opacity-80"},"Total Sales"),n.a.createElement("div",{className:"text-3xl font-bold"},"\u20b9",t.salesDetails.reduce((e,t)=>e+(t.mrp*t.quantity-t.discount),0).toFixed(2)),n.a.createElement("div",{className:"text-sm opacity-80 mt-2"},"Total Revenue")),n.a.createElement("div",{className:"bg-gradient-to-r from-emerald-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},n.a.createElement("div",{className:"text-sm font-medium mb-2 opacity-80"},"Total Quantity"),n.a.createElement("div",{className:"text-3xl font-bold"},t.salesDetails.reduce((e,t)=>e+t.quantity,0)),n.a.createElement("div",{className:"text-sm opacity-80 mt-2"},"Units Sold")),n.a.createElement("div",{className:"bg-gradient-to-r from-purple-500 to-fuchsia-600 rounded-xl shadow-lg p-6 text-white"},n.a.createElement("div",{className:"text-sm font-medium mb-2 opacity-80"},"Average Price"),n.a.createElement("div",{className:"text-3xl font-bold"},"\u20b9",(t.salesDetails.reduce((e,t)=>e+(t.mrp*t.quantity-t.discount),0)/t.salesDetails.reduce((e,t)=>e+t.quantity,0)).toFixed(2)),n.a.createElement("div",{className:"text-sm opacity-80 mt-2"},"Per Unit")))),n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden"},n.a.createElement("div",{className:"overflow-x-auto"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white"},n.a.createElement("tr",null,n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Invoice Number"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Date"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Party Name"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Quantity"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"MRP"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Discount"),n.a.createElement("th",{className:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider"},"Total"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.salesDetails.length>0?t.salesDetails.map((e,t)=>n.a.createElement("tr",{key:t,className:`${t%2===0?"bg-white":"bg-indigo-50"} hover:bg-indigo-100 transition duration-150`},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.saleInvoiceNumber),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(e.date).toLocaleDateString()),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.partyName),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.quantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.mrp),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},"\u20b9",e.discount),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},"\u20b9",(e=>(e.mrp*e.quantity-e.discount).toFixed(2))(e)))):n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500"},"No sales data found for the selected filters"))),n.a.createElement("tfoot",{className:"bg-indigo-50"},n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"3",className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},"Total"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},t.salesDetails.reduce((e,t)=>e+t.quantity,0)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},"-"),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},"\u20b9",t.salesDetails.reduce((e,t)=>e+t.discount,0).toFixed(2)),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900"},"\u20b9",t.salesDetails.reduce((e,t)=>e+(t.mrp*t.quantity-t.discount),0).toFixed(2))))))),n.a.createElement("div",{className:"mt-8 flex justify-between"},n.a.createElement("button",{onClick:()=>e("/dashboard"),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-200 shadow-md flex items-center space-x-2"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})),n.a.createElement("span",null,"Back to Dashboard")),n.a.createElement("button",{onClick:Q,className:"px-6 py-3 bg-gradient-to-r from-rose-500 to-pink-500 text-white rounded-lg hover:from-rose-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 transition duration-200 shadow-md flex items-center space-x-2"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.a.createElement("span",null,"Download PDF Report"))))):n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 p-8"},n.a.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md p-8"},n.a.createElement("h1",{className:"text-2xl font-bold text-indigo-800 mb-6 border-b pb-4"},"Medicine Sales Summary"),n.a.createElement("div",{className:"mb-8"},n.a.createElement("label",{htmlFor:"medicineName",className:"block text-sm font-medium text-gray-700 mb-2"},"Enter Medicine Name"),n.a.createElement("div",{className:"flex space-x-2"},n.a.createElement("div",{className:"relative flex-grow"},n.a.createElement("input",{ref:R,id:"medicineName",type:"text",value:m,onChange:I,onBlur:O,onFocus:L,placeholder:"e.g., Paracetamol, Amoxicillin",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200",autoComplete:"off"}),y&&x.length>0&&n.a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",onMouseDown:e=>e.preventDefault()},x.map((e,t)=>n.a.createElement("div",{key:t,onClick:()=>F(e),className:"px-4 py-2 hover:bg-indigo-50 cursor-pointer transition duration-150"},e)))),n.a.createElement("button",{onClick:P,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg hover:from-indigo-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-200 shadow-md"},"Search"))),n.a.createElement("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-6 rounded-xl mb-8 shadow-sm"},n.a.createElement("h2",{className:"text-lg font-semibold text-indigo-800 mb-4"},"Additional Filters"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"partyName",className:"block text-sm font-medium text-gray-700 mb-2"},"Party Name (Optional)"),n.a.createElement("select",{id:"partyName",value:f,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"},n.a.createElement("option",{value:""},"All Parties"),k.map((e,t)=>n.a.createElement("option",{key:t,value:e},e)))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2"},"Start Date"),n.a.createElement("input",{id:"startDate",type:"date",value:N,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2"},"End Date"),n.a.createElement("input",{id:"endDate",type:"date",value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200"}))),n.a.createElement("div",{className:"flex justify-end space-x-3"},n.a.createElement("button",{onClick:$,className:"px-5 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition duration-200 shadow-sm"},"Reset Filters"),n.a.createElement("button",{onClick:T,className:"px-5 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-200 shadow-md",disabled:!m.trim()},"Apply Filters"))),n.a.createElement("div",{className:"text-gray-600 text-center py-8 border-t"},u.length>0?n.a.createElement("div",null,n.a.createElement("p",{className:"mb-3 text-indigo-700 font-medium"},"Popular medicines in your inventory:"),n.a.createElement("div",{className:"flex flex-wrap gap-2 justify-center"},u.slice(0,5).map((e,t)=>n.a.createElement("span",{key:t,onClick:()=>F(e),className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm cursor-pointer hover:bg-indigo-200 transition duration-150 shadow-sm"},e)),u.length>5&&n.a.createElement("span",{className:"text-gray-500"},"+",u.length-5," more"))):n.a.createElement("p",null,"No medicines found in your inventory"))))};p.a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),p.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Session expired: Redirecting to login"),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));var ee=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)({partyName:"",date:(new Date).toISOString().split("T")[0],email:"",notes:""}),[l,o]=Object(r.useState)({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),[s,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(""),[x,b]=Object(r.useState)([]),[y,h]=Object(r.useState)([]),[f,E]=Object(r.useState)([]),[N,v]=Object(r.useState)(0);Object(r.useEffect)(()=>{const t=localStorage.getItem("token"),r=localStorage.getItem("email");t&&r?a(e=>({...e,email:r})):e("/login",{state:{from:window.location.pathname}})},[e]),Object(r.useEffect)(()=>{const e=f.reduce((e,t)=>e+t.returnQuantity*t.mrp,0);v(e)},[f]);const w=e=>{const{name:r,value:n}=e.target;a({...t,[r]:n}),"partyName"===r&&n.trim().length>2&&(b([]),h([]),o({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),setTimeout(()=>(async()=>{try{if(c(!0),d(""),!t.partyName)return d("Please enter a client name first."),void c(!1);const e=`https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client-purchase-history?partyName=${encodeURIComponent(t.partyName)}&email=${encodeURIComponent(t.email)}`;console.log("Requesting URL:",e);const a=await p.a.get(e);if(a.data.success&&a.data.data.length>0){const e=[...new Set(a.data.data.map(e=>e.itemName))];b(e)}else b([]),d("No purchase history found for this client.");c(!1)}catch(m){console.error("Error fetching medicines:",m),d("Failed to fetch medicines. Please try again."),c(!1)}})(),500))},S=e=>{try{const t=new B.b;t.setProperties({title:`Client Expiry Return - ${e.returnBillNumber}`,subject:"Client Expiry Return Bill",author:"Medicine Inventory Management System",creator:"Medicine Inventory Management System"}),t.setFont("helvetica","bold"),t.setFontSize(20),t.setTextColor(63,81,181),t.text("CLIENT EXPIRY RETURN BILL",105,20,{align:"center"}),t.setFontSize(12),t.setTextColor(100,100,100),t.text(`Bill Number: ${e.returnBillNumber}`,20,30);const a=(new Date).toLocaleDateString();t.text(`Date: ${a}`,20,36),t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Medicine Inventory Management",20,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("Your Address Line 1",20,56),t.text("Your Address Line 2",20,61),t.text("Phone: +91 XXXXXXXXXX",20,66),t.text("Email: contact@example.com",20,71),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Client Details:",120,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text(`Name: ${e.partyName}`,120,56),t.text(`Date: ${new Date(e.date).toLocaleDateString()}`,120,61),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("Returned Items:",20,85);const r=["Sr. No.","Item Name","Batch","Expiry Date","Original Sale","Return Qty","MRP","Value"],n=e.items.map((e,t)=>[t+1,e.itemName,e.batch,new Date(e.expiryDate).toLocaleDateString(),e.originalSaleInvoiceNumber,e.returnQuantity,`\u20b9${e.mrp}`,`\u20b9${(e.returnQuantity*e.mrp).toFixed(2)}`]);t.autoTable({startY:90,head:[r],body:n,theme:"grid",headStyles:{fillColor:[63,81,181],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,250]},margin:{top:20}});const l=t.lastAutoTable.finalY+10;t.setFontSize(11),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text(`Total Items: ${e.totalItems}`,130,l),t.text(`Total Quantity: ${e.totalQuantity}`,130,l+6),t.text(`Total Value: \u20b9${e.totalValue.toFixed(2)}`,130,l+12),e.notes&&(t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Notes:",20,l+10),t.setFont("helvetica","normal"),t.text(e.notes,20,l+16)),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("This is a computer-generated document. No signature is required.",105,280,{align:"center"}),t.save(`ClientExpiryReturn_${e.returnBillNumber}.pdf`)}catch(m){console.error("Error generating PDF:",m),d("Error generating PDF. Please try again.")}};return localStorage.getItem("token")?n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 py-8"},n.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.a.createElement("div",{className:"text-center mb-8"},n.a.createElement("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600"},"Client Expiry Return"),n.a.createElement("p",{className:"mt-2 text-lg text-gray-600"},"Create a return bill for expired items from clients")),m&&n.a.createElement("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-red-700 font-medium"},m)))),u&&n.a.createElement("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-green-700 font-medium"},u)))),n.a.createElement("div",{className:"grid grid-cols-1 gap-8"},n.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),0!==f.length)try{c(!0),d("");const e={partyName:t.partyName,date:t.date,items:f.map(e=>({itemName:e.itemName,batch:e.batch,expiryDate:e.expiryDate,originalSaleInvoiceNumber:e.originalSaleInvoiceNumber,soldQuantity:e.soldQuantity,returnQuantity:e.returnQuantity,mrp:e.mrp,purchaseRate:e.purchaseRate})),email:t.email,notes:t.notes},l=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client",e,{headers:{"Content-Type":"application/json"}});l.data.success&&(S(l.data.data),g("Client expiry return created successfully!"),a({partyName:"",date:(new Date).toISOString().split("T")[0],email:t.email,notes:""}),b([]),h([]),E([])),c(!1)}catch(m){var r,n;console.error("Error creating client expiry return:",m),d((null===(r=m.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to create client expiry return. Please try again."),c(!1)}else d("Please add at least one item to return.")},className:"bg-white rounded-xl shadow-lg p-6 border-t-4 border-indigo-500"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"partyName",className:"block text-sm font-semibold text-gray-700 mb-2"},"Client Name *"),n.a.createElement("input",{type:"text",id:"partyName",name:"partyName",value:t.partyName,onChange:w,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter client name",required:!0}),x.length>0&&n.a.createElement("p",{className:"mt-1 text-xs text-green-600"},"Found medicines sold to this client")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"date",className:"block text-sm font-semibold text-gray-700 mb-2"},"Return Date"),n.a.createElement("input",{type:"date",id:"date",name:"date",value:t.date,onChange:w,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"}))),n.a.createElement("div",{className:"bg-indigo-50 p-5 rounded-lg mb-6 border border-indigo-100"},n.a.createElement("h3",{className:"text-lg font-semibold text-indigo-700 mb-4"},"Select Medicine and Batch"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"itemName",className:"block text-sm font-medium text-gray-700 mb-1"},"Medicine Name *"),n.a.createElement("select",{id:"itemName",value:l.itemName,onChange:e=>{const a=e.target.value;o({...l,itemName:a,batch:""}),(async e=>{try{if(c(!0),d(""),!e)return h([]),void c(!1);const a=`https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client-purchase-history?partyName=${encodeURIComponent(t.partyName)}&email=${encodeURIComponent(t.email)}&itemName=${encodeURIComponent(e)}`;console.log("Requesting medicine batches URL:",a);const r=await p.a.get(a);r.data.success&&r.data.data.length>0?h(r.data.data):(h([]),d("No batches found for this medicine.")),c(!1)}catch(m){console.error("Error fetching batches:",m),d("Failed to fetch batches. Please try again."),c(!1)}})(a)},className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!t.partyName||0===x.length},n.a.createElement("option",{value:""},"Select Medicine"),x.map((e,t)=>n.a.createElement("option",{key:t,value:e},e)))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"batch",className:"block text-sm font-medium text-gray-700 mb-1"},"Batch *"),n.a.createElement("select",{id:"batch",value:l.batch,onChange:e=>{const t=e.target.value,a=y.find(e=>e.batch===t);a&&o({itemName:a.itemName,batch:a.batch,soldQuantity:a.quantity,returnQuantity:a.quantity,originalSaleInvoiceNumber:a.saleInvoiceNumber,expiryDate:new Date(a.expiryDate).toISOString().split("T")[0],mrp:a.mrp,purchaseRate:a.mrp})},className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!l.itemName||0===y.length},n.a.createElement("option",{value:""},"Select Batch"),y.map((e,t)=>n.a.createElement("option",{key:t,value:e.batch},e.batch," (Exp: ",new Date(e.expiryDate).toLocaleDateString(),")")))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"returnQuantity",className:"block text-sm font-medium text-gray-700 mb-1"},"Return Quantity *"),n.a.createElement("div",{className:"flex"},n.a.createElement("input",{type:"number",id:"returnQuantity",value:l.returnQuantity||"",onChange:e=>{const t=Math.min(Math.max(1,parseInt(e.target.value)||0),l.soldQuantity);o({...l,returnQuantity:t})},min:"1",max:l.soldQuantity,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-l-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!l.batch}),n.a.createElement("span",{className:"inline-flex items-center px-3 bg-gray-200 text-gray-600 border-2 border-l-0 border-indigo-200 rounded-r-lg"},"/ ",l.soldQuantity)))),l.batch&&n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Expiry Date"),n.a.createElement("input",{type:"date",value:l.expiryDate,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"MRP"),n.a.createElement("input",{type:"text",value:`\u20b9${l.mrp}`,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Original Invoice"),n.a.createElement("input",{type:"text",value:l.originalSaleInvoiceNumber,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0}))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"button",onClick:()=>{if(!l.itemName||!l.batch||l.returnQuantity<=0)return void d("Please select a medicine, batch, and enter a valid return quantity.");if(-1!==f.findIndex(e=>e.itemName===l.itemName&&e.batch===l.batch))return void d("This item is already added to the return list.");const e=l.returnQuantity*l.mrp;E([...f,{...l,value:e}]),o({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),d("")},disabled:!l.batch||l.returnQuantity<=0,className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},"Add Item to Return"))),f.length>0&&n.a.createElement("div",{className:"mb-6"},n.a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-3"},"Return Items"),n.a.createElement("div",{className:"overflow-x-auto rounded-lg shadow border border-gray-200"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Batch"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expiry Date"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"MRP"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Action"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.map((e,t)=>n.a.createElement("tr",{key:t,className:"hover:bg-gray-50"},n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},e.batch),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},new Date(e.expiryDate).toLocaleDateString()),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},e.returnQuantity),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},"\u20b9",e.mrp),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-indigo-700"},"\u20b9",(e.returnQuantity*e.mrp).toFixed(2)),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},n.a.createElement("button",{type:"button",onClick:()=>(e=>{const t=[...f];t.splice(e,1),E(t)})(t),className:"text-red-600 hover:text-red-800"},n.a.createElement("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))))))),n.a.createElement("tfoot",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"5",className:"px-3 py-3 text-sm font-bold text-gray-700 text-right"},"Total Value:"),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-bold text-indigo-700"},"\u20b9",N.toFixed(2)),n.a.createElement("td",null)))))),n.a.createElement("div",{className:"mb-6"},n.a.createElement("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-700 mb-2"},"Notes (Optional)"),n.a.createElement("textarea",{id:"notes",name:"notes",value:t.notes,onChange:w,rows:"2",className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Any additional notes about this return"})),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"submit",disabled:0===f.length||s,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white font-medium rounded-lg hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},s?n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),"Create Client Expiry Return"))))))):n.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},n.a.createElement("div",{className:"text-center"},n.a.createElement("p",{className:"text-lg text-gray-600"},"Checking authentication...")))};p.a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),p.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Session expired: Redirecting to login"),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));var te=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)({partyName:"",date:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],email:"",notes:""}),[l,o]=Object(r.useState)({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),[s,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(""),[x,b]=Object(r.useState)([]),[y,h]=Object(r.useState)([]),[f,E]=Object(r.useState)([]),[N,v]=Object(r.useState)(0);Object(r.useEffect)(()=>{const t=localStorage.getItem("token"),r=localStorage.getItem("email");t&&r?a(e=>({...e,email:r})):e("/login",{state:{from:window.location.pathname}})},[e]),Object(r.useEffect)(()=>{const e=f.reduce((e,t)=>e+t.returnQuantity*t.mrp,0);v(e)},[f]);const w=async()=>{try{if(c(!0),d(""),!t.partyName)return d("Please enter a client name first."),void c(!1);const e=`https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client-purchase-history?partyName=${encodeURIComponent(t.partyName)}&email=${encodeURIComponent(t.email)}&startDate=${encodeURIComponent(t.date)}&endDate=${encodeURIComponent(t.endDate)}`;console.log("Requesting URL:",e);const a=await p.a.get(e);if(a.data.success&&a.data.data.length>0){const e=[...new Set(a.data.data.map(e=>e.itemName))];b(e)}else b([]),d("No purchase history found for this client.");c(!1)}catch(m){console.error("Error fetching medicines:",m),d("Failed to fetch medicines. Please try again."),c(!1)}},S=e=>{const{name:r,value:n}=e.target;a({...t,[r]:n}),"partyName"===r&&n.trim().length>2&&(b([]),h([]),o({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),setTimeout(()=>w(),500)),("date"===r||"endDate"===r)&&t.partyName.trim().length>2&&(b([]),h([]),o({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),setTimeout(()=>w(),500))},k=e=>{try{const t=new B.b;t.setProperties({title:`Client Expiry Return - ${e.returnBillNumber}`,subject:"Client Expiry Return Bill",author:"Medicine Inventory Management System",creator:"Medicine Inventory Management System"}),t.setFont("helvetica","bold"),t.setFontSize(20),t.setTextColor(63,81,181),t.text("CLIENT EXPIRY RETURN BILL",105,20,{align:"center"}),t.setFontSize(12),t.setTextColor(100,100,100),t.text(`Bill Number: ${e.returnBillNumber}`,20,30);const a=(new Date).toLocaleDateString();t.text(`Date: ${a}`,20,36),t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Medicine Inventory Management",20,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("Your Address Line 1",20,56),t.text("Your Address Line 2",20,61),t.text("Phone: +91 XXXXXXXXXX",20,66),t.text("Email: contact@example.com",20,71),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Client Details:",120,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text(`Name: ${e.partyName}`,120,56),t.text(`Start Date: ${new Date(e.date).toLocaleDateString()}`,120,61),t.text(`End Date: ${new Date(e.endDate).toLocaleDateString()}`,120,66),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("Returned Items:",20,85);const r=["Sr. No.","Item Name","Batch","Expiry Date","Original Sale","Return Qty","MRP","Value"],n=e.items.map((e,t)=>[t+1,e.itemName,e.batch,new Date(e.expiryDate).toLocaleDateString(),e.originalSaleInvoiceNumber,e.returnQuantity,`\u20b9${e.mrp}`,`\u20b9${(e.returnQuantity*e.mrp).toFixed(2)}`]);t.autoTable({startY:90,head:[r],body:n,theme:"grid",headStyles:{fillColor:[63,81,181],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,250]},margin:{top:20}});const l=t.lastAutoTable.finalY+10;t.setFontSize(11),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text(`Total Items: ${e.totalItems}`,130,l),t.text(`Total Quantity: ${e.totalQuantity}`,130,l+6),t.text(`Total Value: \u20b9${e.totalValue.toFixed(2)}`,130,l+12),e.notes&&(t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Notes:",20,l+10),t.setFont("helvetica","normal"),t.text(e.notes,20,l+16)),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("This is a computer-generated document. No signature is required.",105,280,{align:"center"}),t.save(`ClientExpiryReturn_${e.returnBillNumber}.pdf`)}catch(m){console.error("Error generating PDF:",m),d("Error generating PDF. Please try again.")}};return localStorage.getItem("token")?n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 py-8"},n.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.a.createElement("div",{className:"text-center mb-8"},n.a.createElement("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600"},"Client Expiry Return"),n.a.createElement("p",{className:"mt-2 text-lg text-gray-600"},"Create a return bill for expired items from clients")),m&&n.a.createElement("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-red-700 font-medium"},m)))),u&&n.a.createElement("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-green-700 font-medium"},u)))),n.a.createElement("div",{className:"grid grid-cols-1 gap-8"},n.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),0!==f.length)try{c(!0),d("");const e={partyName:t.partyName,date:t.date,endDate:t.endDate,items:f.map(e=>({itemName:e.itemName,batch:e.batch,expiryDate:e.expiryDate,originalSaleInvoiceNumber:e.originalSaleInvoiceNumber,soldQuantity:e.soldQuantity,returnQuantity:e.returnQuantity,mrp:e.mrp,purchaseRate:e.purchaseRate})),email:t.email,notes:t.notes},l=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client",e,{headers:{"Content-Type":"application/json"}});l.data.success&&(k(l.data.data),g("Client expiry return created successfully!"),a({partyName:"",date:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],email:t.email,notes:""}),b([]),h([]),E([])),c(!1)}catch(m){var r,n;console.error("Error creating client expiry return:",m),d((null===(r=m.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to create client expiry return. Please try again."),c(!1)}else d("Please add at least one item to return.")},className:"bg-white rounded-xl shadow-lg p-6 border-t-4 border-indigo-500"},n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"partyName",className:"block text-sm font-semibold text-gray-700 mb-2"},"Client Name *"),n.a.createElement("input",{type:"text",id:"partyName",name:"partyName",value:t.partyName,onChange:S,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter client name",required:!0}),x.length>0&&n.a.createElement("p",{className:"mt-1 text-xs text-green-600"},"Found medicines sold to this client")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"date",className:"block text-sm font-semibold text-gray-700 mb-2"},"Start Date"),n.a.createElement("input",{type:"date",id:"date",name:"date",value:t.date,onChange:S,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-semibold text-gray-700 mb-2"},"End Date"),n.a.createElement("input",{type:"date",id:"endDate",name:"endDate",value:t.endDate,onChange:S,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"}))),n.a.createElement("div",{className:"bg-indigo-50 p-5 rounded-lg mb-6 border border-indigo-100"},n.a.createElement("h3",{className:"text-lg font-semibold text-indigo-700 mb-4"},"Select Medicine and Batch"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"itemName",className:"block text-sm font-medium text-gray-700 mb-1"},"Medicine Name *"),n.a.createElement("select",{id:"itemName",value:l.itemName,onChange:e=>{const a=e.target.value;o({...l,itemName:a,batch:""}),(async e=>{try{if(c(!0),d(""),!e)return h([]),void c(!1);const a=`https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/client-purchase-history?partyName=${encodeURIComponent(t.partyName)}&email=${encodeURIComponent(t.email)}&itemName=${encodeURIComponent(e)}&startDate=${encodeURIComponent(t.date)}&endDate=${encodeURIComponent(t.endDate)}`;console.log("Requesting medicine batches URL:",a);const r=await p.a.get(a);r.data.success&&r.data.data.length>0?h(r.data.data):(h([]),d("No batches found for this medicine.")),c(!1)}catch(m){console.error("Error fetching batches:",m),d("Failed to fetch batches. Please try again."),c(!1)}})(a)},className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!t.partyName||0===x.length},n.a.createElement("option",{value:""},"Select Medicine"),x.map((e,t)=>n.a.createElement("option",{key:t,value:e},e)))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"batch",className:"block text-sm font-medium text-gray-700 mb-1"},"Batch *"),n.a.createElement("select",{id:"batch",value:l.batch,onChange:e=>{const t=e.target.value,a=y.find(e=>e.batch===t);a&&o({itemName:a.itemName,batch:a.batch,soldQuantity:a.quantity,returnQuantity:a.quantity,originalSaleInvoiceNumber:a.saleInvoiceNumber,expiryDate:new Date(a.expiryDate).toISOString().split("T")[0],mrp:a.mrp,purchaseRate:a.mrp})},className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!l.itemName||0===y.length},n.a.createElement("option",{value:""},"Select Batch"),y.map((e,t)=>n.a.createElement("option",{key:t,value:e.batch},e.batch," (Exp: ",new Date(e.expiryDate).toLocaleDateString(),")")))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"returnQuantity",className:"block text-sm font-medium text-gray-700 mb-1"},"Return Quantity *"),n.a.createElement("div",{className:"flex"},n.a.createElement("input",{type:"number",id:"returnQuantity",value:l.returnQuantity||"",onChange:e=>{const t=Math.min(Math.max(1,parseInt(e.target.value)||0),l.soldQuantity);o({...l,returnQuantity:t})},min:"1",max:l.soldQuantity,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-l-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",disabled:!l.batch}),n.a.createElement("span",{className:"inline-flex items-center px-3 bg-gray-200 text-gray-600 border-2 border-l-0 border-indigo-200 rounded-r-lg"},"/ ",l.soldQuantity)))),l.batch&&n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Expiry Date"),n.a.createElement("input",{type:"date",value:l.expiryDate,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"MRP"),n.a.createElement("input",{type:"text",value:`\u20b9${l.mrp}`,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})),n.a.createElement("div",null,n.a.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Original Invoice"),n.a.createElement("input",{type:"text",value:l.originalSaleInvoiceNumber,className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0}))),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"button",onClick:()=>{if(!l.itemName||!l.batch||l.returnQuantity<=0)return void d("Please select a medicine, batch, and enter a valid return quantity.");if(-1!==f.findIndex(e=>e.itemName===l.itemName&&e.batch===l.batch))return void d("This item is already added to the return list.");const e=l.returnQuantity*l.mrp;E([...f,{...l,value:e}]),o({itemName:"",batch:"",soldQuantity:0,returnQuantity:0,originalSaleInvoiceNumber:"",expiryDate:"",mrp:0,purchaseRate:0}),d("")},disabled:!l.batch||l.returnQuantity<=0,className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},"Add Item to Return"))),f.length>0&&n.a.createElement("div",{className:"mb-6"},n.a.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-3"},"Return Items"),n.a.createElement("div",{className:"overflow-x-auto rounded-lg shadow border border-gray-200"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Batch"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expiry Date"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Qty"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"MRP"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value"),n.a.createElement("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Action"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.map((e,t)=>n.a.createElement("tr",{key:t,className:"hover:bg-gray-50"},n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},e.batch),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},new Date(e.expiryDate).toLocaleDateString()),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},e.returnQuantity),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},"\u20b9",e.mrp),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-indigo-700"},"\u20b9",(e.returnQuantity*e.mrp).toFixed(2)),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-700"},n.a.createElement("button",{type:"button",onClick:()=>(e=>{const t=[...f];t.splice(e,1),E(t)})(t),className:"text-red-600 hover:text-red-800"},n.a.createElement("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))))))),n.a.createElement("tfoot",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"5",className:"px-3 py-3 text-sm font-bold text-gray-700 text-right"},"Total Value:"),n.a.createElement("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-bold text-indigo-700"},"\u20b9",N.toFixed(2)),n.a.createElement("td",null)))))),n.a.createElement("div",{className:"mb-6"},n.a.createElement("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-700 mb-2"},"Notes (Optional)"),n.a.createElement("textarea",{id:"notes",name:"notes",value:t.notes,onChange:S,rows:"2",className:"w-full p-3 text-md border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Any additional notes about this return"})),n.a.createElement("div",{className:"flex justify-end"},n.a.createElement("button",{type:"submit",disabled:0===f.length||s,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white font-medium rounded-lg hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},s?n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),"Create Client Expiry Return"))))))):n.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},n.a.createElement("div",{className:"text-center"},n.a.createElement("p",{className:"text-lg text-gray-600"},"Checking authentication...")))};p.a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),p.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.log("Session expired: Redirecting to login"),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));var ae=()=>{const e=Object(i.p)(),[t,a]=Object(r.useState)({partyName:"",startDate:"",endDate:(new Date).toISOString().split("T")[0],items:[],email:""}),[l,o]=Object(r.useState)(1),[s,c]=Object(r.useState)(!1),[m,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(""),[x,b]=Object(r.useState)(!1),[y,h]=Object(r.useState)([]),[f,E]=Object(r.useState)([]),[N,v]=Object(r.useState)([]),[w,S]=Object(r.useState)({totalItems:0,totalQuantity:0,totalValue:0});Object(r.useEffect)(()=>{const t=localStorage.getItem("token"),r=localStorage.getItem("email");t&&r?(console.log("Loading data for email:",r),b(!0),a(e=>({...e,email:r})),k(r)):e("/login",{state:{from:window.location.pathname}})},[e]);const k=async e=>{try{c(!0),console.log(`Fetching suppliers for email: ${e}`);const t=await p.a.get("https://medicine-inventory-management-backend.onrender.com/api/inventory",{params:{email:e},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Inventory API Response:",t.data);const a=[...new Set(t.data.map(e=>e.partyName).filter(Boolean))];console.log("Unique suppliers found:",a),h(a.map(e=>({name:e}))),c(!1)}catch(m){console.error("Error fetching suppliers:",m),m.response&&(console.error("Error response:",m.response.data),console.error("Error status:",m.response.status)),d("Failed to fetch suppliers. Please try again."),c(!1)}},C=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||f.filter(e=>N.includes(e._id)),t=e.length,a=e.reduce((e,t)=>e+(parseInt(t.returnQuantity)||0),0),r=e.reduce((e,t)=>e+(parseInt(t.returnQuantity)||0)*t.purchaseRate,0);S({totalItems:t,totalQuantity:a,totalValue:r})},D=e=>{const{name:r,value:n}=e.target;a({...t,[r]:n})},R=()=>{if(1===l){if(!t.partyName||!t.startDate||!t.endDate)return void d("Please select a party name, start date, and end date.");const e=new Date(t.startDate),r=new Date(t.endDate);if(isNaN(e.getTime())||isNaN(r.getTime()))return void d("Please enter valid date values in YYYY-MM-DD format.");if(r<e)return void d("End date must be after or equal to start date.");const n=new Date(r);n.setDate(n.getDate()+1),a(e=>({...e,adjustedEndDate:n.toISOString().split("T")[0]})),(async()=>{try{c(!0),d("");const r=`https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/party-expiry?partyName=${encodeURIComponent(t.partyName)}&email=${encodeURIComponent(t.email)}&startDate=${encodeURIComponent(t.startDate)}&endDate=${encodeURIComponent(t.endDate)}`;console.log("Requesting URL:",r);const n=await p.a.get(r);if(console.log("Expiry items response:",n.data),n.data.success&&n.data.data.length>0){const e=n.data.data.filter(e=>e.quantity>0).map(e=>({...e,returnQuantity:e.quantity,isSelected:!0}));console.log("Filtered items:",e.length),0===e.length?(E([]),v([]),d("No items with quantity greater than zero found for the selected party and date range.")):(E(e),v(e.map(e=>e._id)),C(e))}else if(E([]),v([]),n.data.success){const e=new Date,a=new Date(t.startDate),r=new Date(t.endDate);d(a>e?"Start date is in the future. Try selecting a past or current date.":r<a?"End date must be after or equal to start date.":`No expiring items found for supplier "${t.partyName}" in the selected date range. \n                     Check that the supplier has items with expiry dates between ${t.startDate} and ${t.endDate}.`)}else d(n.data.message||"No expiring items found for the selected party and date range.");c(!1)}catch(m){var e,a;console.error("Error fetching expiry items:",m),m.response&&(console.error("Error response:",m.response.data),console.error("Error status:",m.response.status)),d((null===(e=m.response)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch expiring items. Please try again."),c(!1)}})()}else if(2===l&&0===N.length)return void d("Please select at least one item.");d(""),o(e=>e+1)},A=()=>{d(""),o(e=>e-1)},I=async()=>{try{c(!0),d("");const n=f.filter(e=>N.includes(e._id)).map(e=>({_id:e._id,itemName:e.itemName,batch:e.batch,expiryDate:e.expiryDate,quantity:e.quantity,returnQuantity:e.returnQuantity,mrp:e.mrp,purchaseRate:e.purchaseRate,gstPercentage:e.gstPercentage||0})),l={partyName:t.partyName,startDate:t.startDate,endDate:t.endDate,items:n,email:t.email};console.log("Submitting supplier expiry return with payload:",l);const s=await p.a.post("https://medicine-inventory-management-backend.onrender.com/api/expiry-bills/supplier",l,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});s.data.success&&(j(s.data.data),g("Supplier expiry return bill created successfully!"),a({partyName:"",startDate:"",endDate:(new Date).toISOString().split("T")[0],items:[],email:t.email}),E([]),v([]),o(1)),c(!1)}catch(m){var e,r;console.error("Error creating supplier expiry return:",m),d((null===(e=m.response)||void 0===e?void 0:null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to create supplier expiry return. Please try again."),c(!1)}},j=e=>{try{const t=new B.b;t.setProperties({title:`Supplier Expiry Return - ${e.expiryBillNumber}`,subject:"Supplier Expiry Return Bill",author:"Medicine Inventory Management System",creator:"Medicine Inventory Management System"}),t.setFont("helvetica","bold"),t.setFontSize(20),t.setTextColor(63,81,181),t.text("SUPPLIER EXPIRY RETURN BILL",105,20,{align:"center"}),t.setFontSize(12),t.setTextColor(100,100,100),t.text(`Bill Number: ${e.expiryBillNumber}`,20,30);const a=(new Date).toLocaleDateString();t.text(`Date: ${a}`,20,36),t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Medicine Inventory Management",20,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("Your Address Line 1",20,56),t.text("Your Address Line 2",20,61),t.text("Phone: +91 XXXXXXXXXX",20,66),t.text("Email: contact@example.com",20,71),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text("Party Details:",120,50),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text(`Name: ${e.partyName}`,120,56),t.text("Date Range:",120,61),t.text(`Start: ${new Date(e.startDate).toLocaleDateString()}`,120,66),t.setTextColor(0,100,0),t.text(`End: ${new Date(e.endDate).toLocaleDateString()}`,120,71),t.setFontSize(12),t.setFont("helvetica","bold"),t.text("Item Details:",20,85);const r=["Sr. No.","Item Name","Batch","Expiry Date","Qty","Purchase Rate","Value"],n=e.items.map((e,t)=>[t+1,e.itemName,e.batch,new Date(e.expiryDate).toLocaleDateString(),e.returnQuantity,`\u20b9${e.purchaseRate.toFixed(2)}`,`\u20b9${(e.returnQuantity*e.purchaseRate).toFixed(2)}`]);t.autoTable({startY:90,head:[r],body:n,theme:"grid",headStyles:{fillColor:[63,81,181],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[240,240,250]},margin:{top:20}});const l=t.lastAutoTable.finalY+10;t.setFontSize(11),t.setFont("helvetica","bold"),t.setTextColor(0,0,0),t.text(`Total Items: ${e.totalItems}`,130,l),t.text(`Total Quantity: ${e.totalQuantity}`,130,l+6),t.text(`Total Value: \u20b9${e.totalValue.toFixed(2)}`,130,l+12),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(100,100,100),t.text("This is a computer-generated document. No signature is required.",105,280,{align:"center"}),t.save(`SupplierExpiryReturn_${e.expiryBillNumber}.pdf`)}catch(m){console.error("Error generating PDF:",m),d("Error generating PDF. Please try again.")}};return x?n.a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 py-8"},n.a.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.a.createElement("div",{className:"text-center mb-8"},n.a.createElement("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600"},"Supplier Expiry Return"),n.a.createElement("p",{className:"mt-2 text-lg text-gray-600"},"Create a return bill for expired items to supplier")),m&&n.a.createElement("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-red-700 font-medium"},m)))),u&&n.a.createElement("div",{className:"mb-6 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg shadow-sm"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"flex-shrink-0"},n.a.createElement("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.a.createElement("div",{className:"ml-3"},n.a.createElement("p",{className:"text-sm text-green-700 font-medium"},u)))),n.a.createElement("div",{className:"mb-8"},n.a.createElement("nav",{className:"flex justify-center"},n.a.createElement("ol",{className:"flex items-center"},n.a.createElement("li",{className:"flex items-center"},n.a.createElement("div",{className:`flex items-center justify-center h-10 w-10 rounded-full ${l>=1?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md":"bg-gray-200 text-gray-500"}`},"1"),n.a.createElement("span",{className:`ml-2 text-sm font-medium ${l>=1?"text-indigo-600":"text-gray-500"}`},"Party & Date")),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("div",{className:`h-0.5 w-12 mx-2 ${l>=2?"bg-indigo-500":"bg-gray-300"}`})),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("div",{className:`flex items-center justify-center h-10 w-10 rounded-full ${l>=2?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md":"bg-gray-200 text-gray-500"}`},"2"),n.a.createElement("span",{className:`ml-2 text-sm font-medium ${l>=2?"text-indigo-600":"text-gray-500"}`},"Select Items")),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("div",{className:`h-0.5 w-12 mx-2 ${l>=3?"bg-indigo-500":"bg-gray-300"}`})),n.a.createElement("li",{className:"flex items-center"},n.a.createElement("div",{className:`flex items-center justify-center h-10 w-10 rounded-full ${l>=3?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md":"bg-gray-200 text-gray-500"}`},"3"),n.a.createElement("span",{className:`ml-2 text-sm font-medium ${l>=3?"text-indigo-600":"text-gray-500"}`},"Confirm"))))),1===l&&n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8 border-t-4 border-indigo-500"},n.a.createElement("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center"},n.a.createElement("span",{className:"bg-indigo-100 text-indigo-800 p-2 rounded-full mr-3"},"1"),"Select Party and Date Range"),n.a.createElement("div",{className:"space-y-6"},n.a.createElement("div",{className:"bg-blue-50 p-4 rounded-lg mb-4 border border-blue-200"},n.a.createElement("div",{className:"flex items-center text-blue-700"},n.a.createElement("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},n.a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})),n.a.createElement("p",{className:"text-sm"},"Search for items with expiry dates in the selected range. Expiry items may come from inventory or purchase bills."))),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.a.createElement("div",{className:"col-span-1"},n.a.createElement("label",{htmlFor:"partyName",className:"block text-sm font-semibold text-gray-700 mb-2"},"Party Name (Supplier) *"),n.a.createElement("div",{className:"relative"},n.a.createElement("input",{type:"text",id:"partyName",name:"partyName",value:t.partyName,onChange:D,className:"w-full p-4 text-lg border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter party name",list:"partyNamesList",required:!0}),n.a.createElement("datalist",{id:"partyNamesList"},y.map((e,t)=>n.a.createElement("option",{key:t,value:e.name})))),y.length>0&&n.a.createElement("p",{className:"mt-1 text-xs text-gray-500"},y.length," suppliers found. Type or select from the list.")),n.a.createElement("div",{className:"col-span-1"},n.a.createElement("label",{htmlFor:"startDate",className:"block text-sm font-semibold text-gray-700 mb-2"},"Start Date (Expiry Range) *"),n.a.createElement("input",{type:"date",id:"startDate",name:"startDate",value:t.startDate,onChange:D,className:"w-full p-4 text-lg border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",required:!0}),n.a.createElement("p",{className:"mt-1 text-xs text-gray-500"},"Select the earliest expiry date you want to search for")),n.a.createElement("div",{className:"col-span-1"},n.a.createElement("label",{htmlFor:"endDate",className:"block text-sm font-semibold text-gray-700 mb-2"},"End Date (Expiry Range) *"),n.a.createElement("div",{className:"relative"},n.a.createElement("input",{type:"date",id:"endDate",name:"endDate",value:t.endDate,onChange:D,className:"w-full p-4 text-lg border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"}),n.a.createElement("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-indigo-500",viewBox:"0 0 20 20",fill:"currentColor"},n.a.createElement("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})))),n.a.createElement("p",{className:"mt-1 text-sm text-indigo-600"},"Choose the latest expiry date to include in your search"))),n.a.createElement("div",{className:"flex justify-end pt-4"},n.a.createElement("button",{type:"button",onClick:R,disabled:s,className:"px-8 py-4 text-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-lg hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},s?n.a.createElement("span",{className:"flex items-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):n.a.createElement("span",{className:"flex items-center"},"Search for Expiry Items",n.a.createElement("svg",{className:"ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))))))),2===l&&n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8 border-t-4 border-indigo-500"},n.a.createElement("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center"},n.a.createElement("span",{className:"bg-indigo-100 text-indigo-800 p-2 rounded-full mr-3"},"2"),"Select Expiring Items"),0===f.length?n.a.createElement("div",{className:"text-center py-12 bg-gray-50 rounded-lg"},n.a.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),n.a.createElement("p",{className:"mt-4 text-lg text-gray-600"},"No expiring items found for the selected criteria."),n.a.createElement("button",{onClick:A,className:"mt-6 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200 shadow"},"Go Back")):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"bg-indigo-50 p-4 mb-6 rounded-lg border border-indigo-100"},n.a.createElement("div",{className:"flex items-center text-indigo-700"},n.a.createElement("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm"},"Select items to include in the return bill and adjust quantities if needed."),n.a.createElement("p",{className:"text-sm mt-1 font-medium"},"Note: The available quantities shown reflect current inventory levels after sales and returns.")))),n.a.createElement("div",{className:"overflow-x-auto rounded-lg shadow"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gradient-to-r from-indigo-600 to-purple-600"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Select"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Item Name"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Batch"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Expiry Date"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Available Qty"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Return Qty"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"Purchase Rate"),n.a.createElement("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider"},"MRP"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.map(e=>n.a.createElement("tr",{key:e._id,className:`${N.includes(e._id)?"bg-indigo-50":""} hover:bg-gray-50 transition-colors duration-150`},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("input",{type:"checkbox",checked:N.includes(e._id),onChange:()=>(e=>{N.includes(e)?v(N.filter(t=>t!==e)):v([...N,e])})(e._id),className:"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},e.batch),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},new Date(e.expiryDate).toLocaleDateString()),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},e.quantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.a.createElement("input",{type:"number",value:e.returnQuantity,onChange:t=>((e,t)=>{const a=f.map(a=>{if(a._id===e){const e=parseInt(t)||0,r=Math.min(e,a.quantity);return{...a,returnQuantity:r}}return a});E(a),C(a.filter(e=>N.includes(e._id)))})(e._id,t.target.value),min:"1",max:e.quantity,disabled:!N.includes(e._id),className:"w-24 p-2 border-2 border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:text-gray-500"})),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},"\u20b9",e.purchaseRate),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},"\u20b9",e.mrp)))))),n.a.createElement("div",{className:"mt-8 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0"},n.a.createElement("button",{type:"button",onClick:A,className:"w-full sm:w-auto px-6 py-3 border-2 border-indigo-300 rounded-lg shadow-sm text-base font-medium text-indigo-700 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},n.a.createElement("span",{className:"flex items-center justify-center"},n.a.createElement("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})),"Back")),n.a.createElement("button",{type:"button",onClick:R,disabled:0===N.length||s,className:"w-full sm:w-auto px-8 py-3 text-base bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-lg hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},n.a.createElement("span",{className:"flex items-center justify-center"},"Next",n.a.createElement("svg",{className:"ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))))))),3===l&&n.a.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8 border-t-4 border-indigo-500"},n.a.createElement("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center"},n.a.createElement("span",{className:"bg-indigo-100 text-indigo-800 p-2 rounded-full mr-3"},"3"),"Confirm and Submit"),n.a.createElement("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg mb-8 shadow-inner"},n.a.createElement("h3",{className:"text-xl font-bold text-indigo-700 mb-4"},"Summary"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.a.createElement("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-indigo-100"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"p-3 rounded-full bg-indigo-100 mr-4"},n.a.createElement("svg",{className:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"}))),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500"},"Total Items"),n.a.createElement("p",{className:"text-2xl font-bold text-indigo-700"},w.totalItems)))),n.a.createElement("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-indigo-100"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"p-3 rounded-full bg-purple-100 mr-4"},n.a.createElement("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"}))),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500"},"Total Quantity"),n.a.createElement("p",{className:"text-2xl font-bold text-purple-700"},w.totalQuantity)))),n.a.createElement("div",{className:"bg-white p-5 rounded-lg shadow-sm border border-indigo-100"},n.a.createElement("div",{className:"flex items-center"},n.a.createElement("div",{className:"p-3 rounded-full bg-green-100 mr-4"},n.a.createElement("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm text-gray-500"},"Total Value"),n.a.createElement("p",{className:"text-2xl font-bold text-green-700"},"\u20b9",w.totalValue.toFixed(2))))))),n.a.createElement("div",{className:"mb-8"},n.a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},"Return Details"),n.a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-5 rounded-lg shadow-sm border border-gray-200"},n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1"},"Party Name"),n.a.createElement("p",{className:"text-lg font-bold text-gray-900"},t.partyName)),n.a.createElement("div",null,n.a.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1"},"Date Range"),n.a.createElement("div",{className:"flex flex-col"},n.a.createElement("div",{className:"flex items-center mb-1"},n.a.createElement("span",{className:"text-sm font-medium text-gray-500 w-24"},"Start Date:"),n.a.createElement("span",{className:"text-lg font-bold text-gray-900"},new Date(t.startDate).toLocaleDateString())),n.a.createElement("div",{className:"flex items-center"},n.a.createElement("span",{className:"text-sm font-medium text-gray-500 w-24"},"End Date:"),n.a.createElement("span",{className:"text-lg font-bold text-indigo-700"},new Date(t.endDate).toLocaleDateString())))))),n.a.createElement("div",{className:"mb-8"},n.a.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-4"},"Selected Items"),n.a.createElement("div",{className:"overflow-x-auto rounded-lg shadow border border-gray-200"},n.a.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.a.createElement("thead",{className:"bg-gray-50"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Item Name"),n.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Batch"),n.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Return Qty"),n.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Purchase Rate"),n.a.createElement("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Value"))),n.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},f.filter(e=>N.includes(e._id)).map(e=>n.a.createElement("tr",{key:e._id,className:"hover:bg-gray-50"},n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},e.itemName),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},e.batch),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},e.returnQuantity),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700"},"\u20b9",e.purchaseRate),n.a.createElement("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-indigo-700"},"\u20b9",(e.returnQuantity*e.purchaseRate).toFixed(2)))))))),n.a.createElement("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 mt-8"},n.a.createElement("button",{type:"button",onClick:A,className:"w-full sm:w-auto px-6 py-3 border-2 border-indigo-300 rounded-lg shadow-sm text-base font-medium text-indigo-700 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},n.a.createElement("span",{className:"flex items-center justify-center"},n.a.createElement("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})),"Back")),n.a.createElement("button",{type:"button",onClick:I,disabled:s,className:"w-full sm:w-auto px-8 py-4 text-base bg-gradient-to-r from-green-500 to-teal-500 text-white font-medium rounded-lg hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},s?n.a.createElement("span",{className:"flex items-center justify-center"},n.a.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.a.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):n.a.createElement("span",{className:"flex items-center justify-center"},n.a.createElement("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),"Create Supplier Expiry Return")))))):n.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},n.a.createElement("div",{className:"text-center"},n.a.createElement("p",{className:"text-lg text-gray-600"},"Checking authentication...")))};var re=()=>n.a.createElement("div",{className:"max-w-4xl mx-auto p-8 bg-white rounded-3xl shadow-xl mt-10 font-sans"},n.a.createElement("h1",{className:"text-4xl font-extrabold text-blue-700 mb-6"},"Expiry Bill Documentation"),n.a.createElement("p",{className:"text-lg text-gray-700 mb-6"},n.a.createElement("b",null,"Expiry Bills")," help you manage medicines that are expired or near expiry, either returned by clients or sent back to suppliers. This system ensures proper documentation, inventory updates, and regulatory compliance."),n.a.createElement("h2",{className:"text-2xl font-bold text-blue-600 mb-4"},"Types of Expiry Returns"),n.a.createElement("ul",{className:"list-disc ml-8 mb-6 text-gray-700"},n.a.createElement("li",null,n.a.createElement("b",null,"Client Expiry Return:")," When a customer returns expired medicines. You record the customer details and generate a return bill."),n.a.createElement("li",null,n.a.createElement("b",null,"Supplier Expiry Return:")," When you return expired stock to your supplier. You record the supplier/party details and generate a return bill.")),n.a.createElement("h2",{className:"text-2xl font-bold text-blue-600 mb-4"},"How to Use the Smart Bill Generator"),n.a.createElement("ol",{className:"list-decimal ml-8 mb-6 text-gray-700"},n.a.createElement("li",null,"Go to ",n.a.createElement("b",null,"Expiry Bill Management")," and choose either ",n.a.createElement("b",null,"Client Expiry Return")," or ",n.a.createElement("b",null,"Supplier Expiry Return"),"."),n.a.createElement("li",null,"Fill in the required header details (Email, Bill Number, Date, Customer/Supplier Name)."),n.a.createElement("li",null,"Add all expired medicines, entering all required fields for each row."),n.a.createElement("li",null,"Click ",n.a.createElement("b",null,"Create Bill & Download PDF")," to save and download your expiry bill.")),n.a.createElement("h2",{className:"text-2xl font-bold text-blue-600 mb-4"},"Fields in Expiry Bill"),n.a.createElement("div",{className:"overflow-x-auto mb-6"},n.a.createElement("table",{className:"min-w-full bg-white border border-gray-200 rounded-xl"},n.a.createElement("thead",{className:"bg-blue-100"},n.a.createElement("tr",null,n.a.createElement("th",{className:"py-2 px-4 border-b text-left"},"Field"),n.a.createElement("th",{className:"py-2 px-4 border-b text-left"},"Description"),n.a.createElement("th",{className:"py-2 px-4 border-b text-left"},"Client Return"),n.a.createElement("th",{className:"py-2 px-4 border-b text-left"},"Supplier Return"))),n.a.createElement("tbody",{className:"text-gray-700"},n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Email ID"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Your email for record"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Bill Number"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Unique bill/invoice number"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Date"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Bill date"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Customer Name"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Client's name"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null)),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Party Name"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Supplier/party name"),n.a.createElement("td",null),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Medicine Name"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Name of the medicine"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Purchase Rate"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Rate at which medicine was purchased"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Expiry"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Expiry date of medicine"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Qty"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Quantity being returned"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Returnable Qty"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"How much can be returned"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"MRP"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Maximum retail price"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"GST"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"GST percentage"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Discount"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Discount applied"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Amount"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Total amount"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f")),n.a.createElement("tr",null,n.a.createElement("td",{className:"py-2 px-4 border-b"},"Net Amount"),n.a.createElement("td",{className:"py-2 px-4 border-b"},"Final amount after discount/GST"),n.a.createElement("td",null,"\u2714\ufe0f"),n.a.createElement("td",null,"\u2714\ufe0f"))))),n.a.createElement("h2",{className:"text-xl font-bold text-blue-600 mb-2"},"Tips"),n.a.createElement("ul",{className:"list-disc ml-8 text-gray-700 mb-4"},n.a.createElement("li",null,"Always double-check expiry dates and quantities before submitting."),n.a.createElement("li",null,"Download and save the PDF for your records and compliance."),n.a.createElement("li",null,"Contact support if you need help with expiry returns or documentation.")));var ne=function(){return n.a.createElement(u,null,n.a.createElement(s.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(W.Toaster,{position:"top-right",reverseOrder:!1}),n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/",element:n.a.createElement(O,null)}),n.a.createElement(i.a,{path:"/dashboard",element:n.a.createElement(f,null)}),n.a.createElement(i.a,{path:"/inventory",element:n.a.createElement(R,null)}),n.a.createElement(i.a,{path:"/view-inventory",element:n.a.createElement(L,null)}),n.a.createElement(i.a,{path:"/alerts",element:n.a.createElement(j,null)}),n.a.createElement(i.a,{path:"/login",element:n.a.createElement(P,null)}),n.a.createElement(i.a,{path:"/register",element:n.a.createElement(T,null)}),n.a.createElement(i.a,{path:"/generate-bill",element:n.a.createElement(Q,null)}),n.a.createElement(i.a,{path:"/documentation/bill-generation",element:n.a.createElement(X,null)}),n.a.createElement(i.a,{path:"/purchase-bill",element:n.a.createElement(q,null)}),n.a.createElement(i.a,{path:"/sell-bill",element:n.a.createElement(M,null)}),n.a.createElement(i.a,{path:"/return-bill",element:n.a.createElement(V,null)}),n.a.createElement(i.a,{path:"/purchase-return",element:n.a.createElement(_,null)}),n.a.createElement(i.a,{path:"/purchase-return-search",element:n.a.createElement(G,null)}),n.a.createElement(i.a,{path:"/sale-return",element:n.a.createElement(H,null)}),n.a.createElement(i.a,{path:"/expiry-bill",element:n.a.createElement(Y,null)}),n.a.createElement(i.a,{path:"/purchase-history",element:n.a.createElement(J,null)}),n.a.createElement(i.a,{path:"/party-invoices",element:n.a.createElement(Z,null)}),n.a.createElement(i.a,{path:"/medicine-sales-summary",element:n.a.createElement(K,null)}),n.a.createElement(i.a,{path:"/expiry/client",element:n.a.createElement(ee,null)}),n.a.createElement(i.a,{path:"/expiry-bill/client",element:n.a.createElement(te,null)}),n.a.createElement(i.a,{path:"/expiry-bill/supplier",element:n.a.createElement(ae,null)}),n.a.createElement(i.a,{path:"/docs/expiry-bill",element:n.a.createElement(re,null)})))))};var le=e=>{e&&e instanceof Function&&a.e(6).then(a.bind(null,60)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:l,getTTFB:o}=t;a(e),r(e),n(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ne,null))),le()}},[[25,1,2]]]);
//# sourceMappingURL=main.301ae310.chunk.js.map